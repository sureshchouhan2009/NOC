"use strict";(self.webpackChunketihadrailapp=self.webpackChunketihadrailapp||[]).push([[8103],{8103:function(e,a,t){t.r(a),t.d(a,{previewSymbol2D:function(){return f}});var l=t(1413),n=t(51995),i=t(10064),s=t(17842),o=t(79563),r=t(37817),u=t(69157),c="picture-fill",m=120,h=document.createElement("canvas");function p(e,a){var t=h.getContext("2d"),l=[];return a&&(a.weight&&l.push(a.weight),a.size&&l.push(a.size+"px"),a.family&&l.push(a.family)),t.font=l.join(" "),t.measureText(e).width}function d(e){if(0===e.length)return 0;if(e.length>2){var a=(0,s.Wz)(1),t=parseFloat(e);switch(e.slice(-2)){case"px":return t;case"pt":return t*a;case"in":return 72*t*a;case"pc":return 12*t*a;case"mm":return 2.8346456692913384*t*a;case"cm":return 28.346456692913385*t*a}}return parseFloat(e)}function f(e,a){var t,h,f=null!=(null==a?void 0:a.size)?(0,s.F2)(a.size):null,v=null!=(null==a?void 0:a.maxSize)?(0,s.F2)(a.maxSize):null,y=null!=(null==a?void 0:a.opacity)?a.opacity:null,w=null!=(null==a?void 0:a.rotation)?a.rotation:"angle"in e?e.angle:null,g=(0,o._M)(e),M=(0,o.mx)(e);if(g&&!M){var b="type"in g?null:new n.Z(g);"#ffffff"===(b?b.toHex():null)&&(M={color:"#bdc3c7",width:.75})}var k={shape:null,fill:null,stroke:M,offset:[0,0]};null!=(t=M)&&t.width&&(M.width=Math.min(M.width,80));var x=(null==(h=M)?void 0:h.width)||0,L=null!=f&&(null==(null==a?void 0:a.scale)||(null==a?void 0:a.scale)),z=0,F=0,Z=!1;switch(e.type){case"simple-marker":var C=e.style,S=Math.min(null!=f?f:(0,s.F2)(e.size),v||m);switch(z=S,F=S,C){case"circle":k.shape={type:"circle",cx:0,cy:0,r:.5*S},L||(z+=x,F+=x);break;case"cross":k.shape={type:"path",path:[{command:"M",values:[0,.5*F]},{command:"L",values:[z,.5*F]},{command:"M",values:[.5*z,0]},{command:"L",values:[.5*z,F]}]};break;case"diamond":k.shape={type:"path",path:[{command:"M",values:[0,.5*F]},{command:"L",values:[.5*z,0]},{command:"L",values:[z,.5*F]},{command:"L",values:[.5*z,F]},{command:"Z",values:[]}]},L||(z+=x,F+=x);break;case"square":k.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[z,0]},{command:"L",values:[z,F]},{command:"L",values:[0,F]},{command:"Z",values:[]}]},L||(z+=x,F+=x),w&&(Z=!0);break;case"triangle":k.shape={type:"path",path:[{command:"M",values:[.5*z,0]},{command:"L",values:[z,F]},{command:"L",values:[0,F]},{command:"Z",values:[]}]},L||(z+=x,F+=x),w&&(Z=!0);break;case"x":k.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[z,F]},{command:"M",values:[z,0]},{command:"L",values:[0,F]}]},w&&(Z=!0);break;case"path":k.shape={type:"path",path:e.path||""},L||(z+=x,F+=x),w&&(Z=!0),L=!0}break;case"simple-line":var j=Math.min(null!=f?f:x,v||80),P=j>22?2*j:40;M.width=j,z=P,F=j,k.shape={type:"path",path:[{command:"M",values:[0,F]},{command:"L",values:[z,F]}]};break;case c:case"simple-fill":z=Math.min(null!=f?f:22,v||m)+x,F=z,L=!0,k.shape="object"==typeof(null==a?void 0:a.symbolConfig)&&null!=a&&a.symbolConfig.isSquareFill?r.JZ.squareFill[0]:r.JZ.fill[0];break;case"picture-marker":var q=(0,s.F2)(e.width),E=(0,s.F2)(e.height),D=null!=f?f:Math.max(q,E),H=q/E;q=H<=1?Math.ceil(D*H):D,E=H<=1?D:Math.ceil(D/H),z=Math.min(q,v||m),F=Math.min(E,v||m),k.shape={type:"image",x:-Math.round(z/2),y:-Math.round(F/2),width:z,height:F,src:e.url||""},w&&(Z=!0);break;case"text":var J=e,T=J.text||"Aa",V=J.font,A=Math.min(null!=f?f:(0,s.F2)(V.size),v||m),O=p(T,{weight:V.weight,size:A,family:V.family}),R=/[\uE600-\uE6FF]/.test(T);z=R?A:O,F=A;var W=.25*d((V?A:0).toString());R&&(W+=5),k.shape={type:"text",text:T,x:0,y:W,align:"middle",decoration:V&&V.decoration,rotated:J.rotated,kerning:J.kerning},k.font=V&&{size:A,style:V.style,decoration:V.decoration,weight:V.weight,family:V.family}}if(!k.shape)return Promise.reject(new i.Z("symbolPreview: renderPreviewHTML2D","symbol not supported."));var _=g,B=e.color,G=null;return _&&"pattern"===_.type&&B&&e.type!==c?G=(0,o.Od)(_.src,B.toCss(!0)).then((function(e){return _.src=e,k.fill=_,k})):(k.fill=g,G=Promise.resolve(k)),G.then((function(e){var t=[[e]];if("object"==typeof(null==a?void 0:a.symbolConfig)&&null!=a&&a.symbolConfig.applyColorModulation){var n=.6*z;t.unshift([(0,l.Z)((0,l.Z)({},e),{},{offset:[-n,0],fill:(0,r.dc)(g,-.3)})]),t.push([(0,l.Z)((0,l.Z)({},e),{},{offset:[n,0],fill:(0,r.dc)(g,.3)})]),z+=2*n}return(0,u.w)(t,[z,F],{node:a&&a.node,scale:L,opacity:y,rotation:w,useRotationSize:Z,effectView:null==a?void 0:a.effectView})}))}}}]);
//# sourceMappingURL=8103.4f0406ae.chunk.js.map