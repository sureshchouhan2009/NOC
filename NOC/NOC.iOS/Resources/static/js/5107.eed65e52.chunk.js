"use strict";(self.webpackChunketihadrailapp=self.webpackChunketihadrailapp||[]).push([[5107],{35107:function(e,t,i){i.r(t),i.d(t,{default:function(){return ne}});var n=i(15671),s=i(43144),a=i(60136),r=i(29388),o=i(27366),l=i(66978),u=i(68860),c=i(8025),d=(i(63780),i(93169),i(25243),i(49861)),h=i(69912),p=i(27496),m=i(100),v=i(32718),y=i(92026),_=i(8537),f=i(77671),g=i(29439),w=i(15861),b=i(87757),C=(i(59486),i(52639)),k=(i(59166),i(51508),i(5163)),M=i(2170),D=i(60176),S=i(15559),L=i(93655),Z=i(65069),O=i(59968),I=i(74229),T=i(2346),x=i(45900),A=i(41201),U=i(36257),R=i(7882),W=i(75021),V=i(58009),E=i(73268),B=i(16072),G=i(29909),j=i(78952),z=1e5,P=function(e){(0,a.Z)(i,e);var t=(0,r.Z)(i);function i(){var e;return(0,n.Z)(this,i),(e=t.apply(this,arguments))._drawActive=!1,e._handles=new m.Z,e._polylineLayer=new L.Z,e._manipulatorLayer=new L.Z,e._groupLayer=new Z.default({layers:[e._polylineLayer,e._manipulatorLayer],listMode:"hide",visible:!1}),e._vertices=[],e.geodesicDistanceThreshold=1e5,e.measurement=null,e.measurementLabel=null,e}return(0,s.Z)(i,[{key:"initialize",value:function(){var e=this;(0,A.ME)("esri/core/t9n/Units").then((function(t){e.messages=t})),this._handles.add((0,U.qe)((0,w.Z)(b.mark((function t(){return b.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,A.ME)("esri/core/t9n/Units");case 2:e.messages=t.sent;case 3:case"end":return t.stop()}}),t)}))))),this.startToolCreation()}},{key:"destroy",value:function(){this._draw=(0,y.SC)(this._draw),this._handles=(0,y.SC)(this._handles),this._polylineLayer=(0,y.SC)(this._polylineLayer),this._manipulatorLayer=(0,y.SC)(this._manipulatorLayer)}},{key:"cursor",get:function(){return this._drawActive?"crosshair":null}},{key:"editable",set:function(e){this._set("editable",e),e||this._draw.reset()}},{key:"onActivate",value:function(){this._drawActive||0!==this._vertices.length||this._startSketch()}},{key:"onAttach",value:function(){var e=this,t=this.view;this._draw=new O.Z({view:t}),t.map.add(this._groupLayer),t.focus(),this._handles.add([(0,_.S1)(this,["unit","geodesicDistanceThreshold","palette","messages"],(function(){e._vertices.length>0&&e._updatePolylines()})),(0,_.S1)(this,"view.spatialReference",(function(e){H(e)&&!(0,D.kR)()&&(0,D.zD)()}))]),this.finishToolCreation()}},{key:"onDetach",value:function(){var e=this.view.map;this._draw.view=null,this._draw=(0,y.SC)(this._draw),e.remove(this._groupLayer),this._handles.removeAll(),this._polylineLayer.removeAll(),this._manipulatorLayer.removeAll(),this._set("measurement",null),this._set("measurementLabel",null)}},{key:"onShow",value:function(){this._groupLayer.visible=!0}},{key:"onHide",value:function(){this._groupLayer.visible=!1}},{key:"reset",value:function(){this._vertices=[],this._polylineLayer.removeAll(),this._set("measurement",null),this._set("measurementLabel",null),this._draw.reset(),this._drawActive=!1,this._updateSketch([])}},{key:"_startSketch",value:function(){var e=this;this._drawActive=!0;var t=this._draw.create("polyline",{mode:"click"});t.on(["vertex-add","vertex-update","vertex-remove","cursor-update","undo","redo"],(function(t){return e._updateSketch(t.vertices)})),t.on("draw-complete",(function(){e._stopSketch()}))}},{key:"_stopSketch",value:function(){this.manipulators.forEach((function(e){e.manipulator.interactive=!0})),this._drawActive=!1,this.complete()}},{key:"_updateSketch",value:function(e){var t=this;if(!H(this.view.spatialReference)||(0,D.kR)()){if(e.length<2)return this._vertices=[],this.manipulators.removeAll(),void this._polylineLayer.removeAll();this.finishToolCreation();for(var i=this.view.spatialReference;this._vertices.length>e.length;){var n=this._vertices.pop().manipulatorId;this.manipulators.remove(n)}for(var s=function(n){var s=(0,g.Z)(e[n],2),a=s[0],r=s[1],o=function(e,t,i,n){var s=new B.default({style:"circle",color:n.handleColor,size:n.handleWidth,outline:{type:"simple-line",width:0}}),a=new B.default({style:"circle",color:n.handleColor,size:1.5*n.handleWidth,outline:{type:"simple-line",width:0}}),r=new C.Z({geometry:e,symbol:s});return new T.L({view:t,layer:i,graphic:r,focusedSymbol:a})}(new R.Z({x:a,y:r,spatialReference:i}),t.view,t._manipulatorLayer,t.palette),l=t.manipulators.add(o);(0,I.Xd)(o,(function(e,i){i.next((0,I.Cf)(t.view)).next((0,I.a9)(e.graphic,2)).next((function(){var i=e.graphic.geometry;t._vertices[n].coord=[i.x,i.y],t._updatePolylines()}))})),t._vertices.push({manipulatorId:l,coord:[a,r]})},a=this._vertices.length;a<e.length;a++)s(a);var r=this._vertices.length-1,o=this._vertices[r],l=(0,g.Z)(e[r],2),u=l[0],c=l[1];if(o.coord[0]!==u||o.coord[1]!==c){o.coord=[u,c];var d=new R.Z({x:u,y:c,spatialReference:i});this.manipulators.findById(o.manipulatorId).graphic.geometry=d}var h=this._drawActive?this._vertices[r].manipulatorId:null;this.manipulators.forEach((function(e){e.manipulator.interactive=null==h||e.id!==h})),this._updatePolylines()}}},{key:"_updatePolylines",value:function(){var e=function(e,t,i){var n,s,a=new G.Z({paths:[e],spatialReference:t});if(t.isGeographic)if((0,S.Gb)(t))n=(0,S.Jf)([a],"meters")[0],s=(0,S.j2)(a,z);else{var r=(0,D.iV)(a,j.Z.WGS84),o=(0,S.j2)(r,z);n=(0,S.Jf)([r],"meters")[0],s=(0,D.iV)(o,t)}else if(t.isWebMercator)n=(0,M.geodesicLength)(a,"meters"),s=(0,M.geodesicDensify)(a,z,"meters");else{var l=(0,M.planarLength)(a,"meters");if(l>=i){var u=(0,D.iV)(a,j.Z.WGS84),c=(0,S.j2)(u,z);n=(0,S.Jf)([u],"meters")[0],s=(0,D.iV)(c,t)}else n=l,s=a}return{measurement:{geometry:s,length:n},original:a,drawing:s}}(this._vertices.map((function(e){return e.coord})),this.view.spatialReference,this.geodesicDistanceThreshold),t=e.measurement,i=e.drawing,n=e.original;this._set("measurement",t);var s,a,r=function(e,t,i){if(!t||!e)return null;switch(i){case"metric":return(0,k.Rd)(e,t.length,"meters");case"imperial":return(0,k.Ud)(e,t.length,"meters");default:return(0,k.VG)(e,(0,u.En)(t.length,"meters",i),i)}}(this.messages,t,this.unit);this._set("measurementLabel",r);var o=this._polylineLayer.graphics;if(2===o.length)s=o.getItemAt(0),a=o.getItemAt(1);else{var l=this.palette,c=l.pathPrimaryColor,d=l.pathSecondaryColor,h=l.pathWidth;s=new C.Z({symbol:new W.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[14,12],lineDashEnding:"FullGap",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",width:h-1.5,color:d},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",width:h,color:c}]}}})}),a=new C.Z({symbol:new V.Z({color:[255,255,255,1],haloColor:[0,0,0,.5],haloSize:2,font:new E.Z({size:14,family:"sans-serif"})})}),o.removeAll(),o.addMany([s,a])}s.geometry=i,a.geometry=n.extent.center,a.symbol.text=r}}]),i}(x.m);function H(e){if(!e)return!1;var t=e.isGeographic,i=e.isWebMercator,n=e.isWGS84;return t&&!n&&!(0,S.Gb)(e)||!t&&!i}(0,o._)([(0,d.Cb)()],P.prototype,"_drawActive",void 0),(0,o._)([(0,d.Cb)()],P.prototype,"cursor",null),(0,o._)([(0,d.Cb)({value:!0})],P.prototype,"editable",null),(0,o._)([(0,d.Cb)({type:Number})],P.prototype,"geodesicDistanceThreshold",void 0),(0,o._)([(0,d.Cb)({readOnly:!0})],P.prototype,"measurement",void 0),(0,o._)([(0,d.Cb)({readOnly:!0})],P.prototype,"measurementLabel",void 0),(0,o._)([(0,d.Cb)()],P.prototype,"messages",void 0),(0,o._)([(0,d.Cb)()],P.prototype,"palette",void 0),(0,o._)([(0,d.Cb)()],P.prototype,"unit",void 0),(0,o._)([(0,d.Cb)({constructOnly:!0})],P.prototype,"view",void 0);var J=P=(0,o._)([(0,h.j)("esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DTool")],P),N=i(32845),q={handleWidth:8,handleColor:[255,128,0,.5],pathWidth:5,pathPrimaryColor:[255,128,0,255],pathSecondaryColor:[255,255,255,255]},F=v.Z.getLogger("esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DViewModel"),X=function(e){(0,a.Z)(i,e);var t=(0,r.Z)(i);function i(e){var s;return(0,n.Z)(this,i),(s=t.call(this,e)).logger=F,s.supportedViewType="2d",s.unsupportedErrorMessage="DistanceMeasurement2DViewModel is only supported in 2D views.",s._handles=new m.Z,s.geodesicDistanceThreshold=1e5,s.measurement=null,s.measurementLabel=null,s.palette=q,s}return(0,s.Z)(i,[{key:"initialize",value:function(){var e=this;this._handles.add([(0,_.S1)(this,["unit","palette","geodesicDistanceThreshold"],(function(t,i,n){e.tool&&(e.tool[n]=t)}))])}},{key:"destroy",value:function(){this._handles&&(this._handles.destroy(),this._handles=null)}},{key:"state",get:function(){var e;return this.disabled||(0,y.Wi)(this.view)||null==(null==(e=this.view)?void 0:e.spatialReference)?"disabled":(0,y.pC)(this.tool)&&this.measurement?this.tool.active?"measuring":"measured":"ready"}},{key:"unit",get:function(){return this._validateUnit(this.defaultUnit)},set:function(e){void 0!==e?this._override("unit",this._validateUnit(e)):this._clearOverride("unit")}},{key:"unitOptions",get:function(){return u.oD},set:function(e){void 0!==e?this._override("unitOptions",this._validateUnits(e)):this._clearOverride("unitOptions")}},{key:"start",value:function(){return this.createTool()}},{key:"clear",value:function(){this.removeTool()}},{key:"createToolParams",value:function(){var e=this;return{toolConstructor:J,constructorArguments:function(){return{geodesicDistanceThreshold:e.geodesicDistanceThreshold,palette:e.palette,unit:e.unit}}}}},{key:"_validateUnit",value:function(e){return-1!==this.unitOptions.indexOf(e)?e:-1!==this.unitOptions.indexOf(this.defaultUnit)?this.defaultUnit:this.unitOptions[0]}},{key:"_validateUnits",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.filter((function(e){return-1!==u.oD.indexOf(e)}));return 0===t.length?u.oD.slice():t}}]),i}(N.V);(0,o._)([(0,d.Cb)(f.Y)],X.prototype,"defaultUnit",void 0),(0,o._)([(0,d.Cb)({type:Number})],X.prototype,"geodesicDistanceThreshold",void 0),(0,o._)([(0,d.Cb)({readOnly:!0,aliasOf:"tool.measurement"})],X.prototype,"measurement",void 0),(0,o._)([(0,d.Cb)({readOnly:!0,aliasOf:"tool.measurementLabel"})],X.prototype,"measurementLabel",void 0),(0,o._)([(0,d.Cb)()],X.prototype,"palette",void 0),(0,o._)([(0,d.Cb)({readOnly:!0})],X.prototype,"state",null),(0,o._)([(0,d.Cb)({type:String})],X.prototype,"unit",null),(0,o._)([(0,d.Cb)({type:[String]})],X.prototype,"unitOptions",null);var Y=X=(0,o._)([(0,h.j)("esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DViewModel")],X),K=i(78088),Q=i(80532),$=i(67005),ee=(i(80975),"esri-distance-measurement-2d"),te={buttonDisabled:"esri-button--disabled",widgetIcon:"esri-icon-measure-line",base:"".concat(ee," esri-widget esri-widget--panel"),container:"".concat(ee,"__container"),hint:"".concat(ee,"__hint"),hintText:"".concat(ee,"__hint-text"),panelError:"".concat(ee,"__panel--error"),measurement:"".concat(ee,"__measurement"),measurementItem:"".concat(ee,"__measurement-item"),measurementItemDisabled:"".concat(ee,"__measurement-item--disabled"),measurementItemTitle:"".concat(ee,"__measurement-item-title"),measurementItemValue:"".concat(ee,"__measurement-item-value"),settings:"".concat(ee,"__settings"),units:"".concat(ee,"__units"),unitsLabel:"".concat(ee,"__units-label"),unitsSelect:"".concat(ee,"__units-select esri-select"),unitsSelectWrapper:"".concat(ee,"__units-select-wrapper"),actionSection:"".concat(ee,"__actions"),newMeasurementButton:"".concat(ee,"__clear-button esri-button esri-button--primary")},ie=function(e){(0,a.Z)(i,e);var t=(0,r.Z)(i);function i(e,s){var a;return(0,n.Z)(this,i),(a=t.call(this,e,s)).iconClass=te.widgetIcon,a.label=void 0,a.messages=null,a.messagesUnits=null,a.unit=null,a.unitOptions=null,a.view=null,a.viewModel=new Y,a}return(0,s.Z)(i,[{key:"render",value:function(){var e=this,t=this.id,i=this.messages,n=this.messagesUnits,s=this.viewModel,a=this.visible,r=s.active,o=s.supported,l=s.measurementLabel,c=s.state,d=s.unit,h=s.unitOptions,p="disabled"===c,m="measuring"===c||"measured"===c,v=r&&"ready"===c?(0,$.u)("section",{key:"hint",class:te.hint},(0,$.u)("p",{class:te.hintText},i.hint)):null,y=o?null:(0,$.u)("section",{key:"unsupported",class:te.panelError},(0,$.u)("p",null,i.unsupported)),_=m?(0,$.u)("section",{key:"measurement",class:te.measurement},function(t,i,n){return i?(0,$.u)("div",{key:"".concat(n,"-enabled"),class:te.measurementItem},(0,$.u)("span",{class:te.measurementItemTitle},t),(0,$.u)("span",{class:te.measurementItemValue},i)):(0,$.u)("div",{key:"".concat(n,"-disabled"),class:e.classes(te.measurementItem,te.measurementItemDisabled),"aria-disabled":"true"},(0,$.u)("span",{class:te.measurementItemTitle},t))}(i.distance,l,"distance")):null,f="".concat(t,"-units"),g=m?(0,$.u)("section",{key:"units",class:te.units},(0,$.u)("label",{class:te.unitsLabel,for:f},i.unit),(0,$.u)("div",{class:te.unitsSelectWrapper},(0,$.u)("select",{class:te.unitsSelect,id:f,onchange:this._changeUnit,bind:this,value:d},h.map((function(e){var t;return(0,$.u)("option",{key:e,value:e},(0,u.ZO)(e)?n.systems[e]:null==(t=n.units[e])?void 0:t.pluralCapitalized)}))))):null,w=m?(0,$.u)("div",{key:"settings",class:te.settings},g):null,b=!o||r&&!m?null:(0,$.u)("div",{class:te.actionSection},(0,$.u)("button",{disabled:p,class:this.classes(te.newMeasurementButton,p&&te.buttonDisabled),bind:this,onclick:this._newMeasurement,title:i.newMeasurement,"aria-label":i.newMeasurement,type:"button"},i.newMeasurement)),C=a?(0,$.u)("div",{class:te.container},y,v,w,_,b):null;return(0,$.u)("div",{class:te.base},C)}},{key:"_newMeasurement",value:function(){(0,l.R8)(this.viewModel.start())}},{key:"_changeUnit",value:function(e){var t=e.target,i=t.options[t.selectedIndex];i&&(this.viewModel.unit=i.value)}}]),i}(p.Z);(0,o._)([(0,c.B)("viewModel.active")],ie.prototype,"active",void 0),(0,o._)([(0,d.Cb)()],ie.prototype,"iconClass",void 0),(0,o._)([(0,d.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ie.prototype,"label",void 0),(0,o._)([(0,d.Cb)()],ie.prototype,"uiStrings",void 0),(0,o._)([(0,d.Cb)(),(0,Q.H)("esri/widgets/DistanceMeasurement2D/t9n/DistanceMeasurement2D")],ie.prototype,"messages",void 0),(0,o._)([(0,d.Cb)(),(0,Q.H)("esri/core/t9n/Units")],ie.prototype,"messagesUnits",void 0),(0,o._)([(0,c.B)("viewModel.unit")],ie.prototype,"unit",void 0),(0,o._)([(0,c.B)("viewModel.unitOptions")],ie.prototype,"unitOptions",void 0),(0,o._)([(0,c.B)("viewModel.view")],ie.prototype,"view",void 0),(0,o._)([(0,d.Cb)({type:Y})],ie.prototype,"viewModel",void 0),(0,o._)([(0,c.B)("viewModel.visible")],ie.prototype,"visible",void 0),(0,o._)([(0,K.h)()],ie.prototype,"_newMeasurement",null),(0,o._)([(0,K.h)()],ie.prototype,"_changeUnit",null);var ne=ie=(0,o._)([(0,h.j)("esri.widgets.DistanceMeasurement2D")],ie)}}]);
//# sourceMappingURL=5107.eed65e52.chunk.js.map