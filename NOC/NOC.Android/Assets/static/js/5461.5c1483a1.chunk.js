"use strict";(self.webpackChunketihadrailapp=self.webpackChunketihadrailapp||[]).push([[5461],{65461:function(e,t,i){i.r(t),i.d(t,{BufferObject:function(){return r.Z},FramebufferObject:function(){return n.Z},Program:function(){return a.$},ProgramCache:function(){return o.Z},Renderbuffer:function(){return s.Z},ShaderCompiler:function(){return h.Z},Texture:function(){return c.Z},VertexArrayObject:function(){return u.Z},createProgram:function(){return l.H},glslifyDefineMap:function(){return l.K},createContextOrErrorHTML:function(){return d.s}});var r=i(44070),n=i(53634),a=i(9256),o=i(68267),s=i(15880),h=i(56648),c=i(51378),u=i(45412),l=i(65706),d=i(49800)},53634:function(e,t,i){i.d(t,{Z:function(){return _}});var r=i(1413),n=i(15671),a=i(43144),o=i(32718),s=i(92026),h=i(37825),c=i(8548),u=i(15880),l=i(51378),d=i(3384),f=o.Z.getLogger("esri.views.webgl.FrameBufferObject"),_=function(){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,n.Z)(this,e),this._context=t,this._glName=null,this._depthAttachment=null,this._stencilAttachment=null,this._colorAttachments=new Map,this._initialized=!1,this._desc=(0,r.Z)({},i),t.instanceCounter.increment(c._g.Framebuffer,this),(0,s.pC)(a)){Array.isArray(a)||(a=[a]);for(var h=0;h<a.length;++h){var d,f,_=a[h],m=void 0;p(_)?(m=_.descriptor,this._colorAttachments.set(36064+h,_)):(m=_,this._colorAttachments.set(36064+h,new l.Z(t,_))),0!==(null==(d=this._desc)?void 0:d.colorTarget)&&2!==(null==(f=this._desc)?void 0:f.colorTarget)&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),this._validateColorAttachmentPoint(36064+h),this._validateTextureDimensions(m,this._desc)}}if(o instanceof u.Z){var T,E=null!=(T=this._desc.depthStencilTarget)?T:3;2===E?this._stencilAttachment=o:1===E||3===E?this._depthAttachment=o:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),g(o.descriptor,this._desc)}else if((0,s.pC)(o)){var x;this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),p(o)?(this._depthStencilTexture=o,x=o.descriptor):this._depthStencilTexture=new l.Z(this._context,o),this._validateTextureDimensions(x,this._desc)}}return(0,a.Z)(e,[{key:"dispose",value:function(){if(this._desc){var e=this._context.getBoundFramebufferObject();this._disposeColorAttachments(),this._disposeDepthStencilAttachments(),this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),this._context.bindFramebuffer(e),this._context.instanceCounter.decrement(c._g.Framebuffer,this),this._desc=null}}},{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._desc}},{key:"colorTexture",get:function(){var e=this._colorAttachments.get(36064);return e&&p(e)?e:null}},{key:"colorAttachment",get:function(){return this._colorAttachments.get(36064)}},{key:"depthStencilAttachment",get:function(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}},{key:"depthStencilTexture",get:function(){return this._depthStencilTexture}},{key:"width",get:function(){return this._desc.width}},{key:"height",get:function(){return this._desc.height}},{key:"gpuMemoryUsage",get:function(){return(0,d.un)(this.colorAttachment)+(0,d.un)(this.depthStencilAttachment)}},{key:"getColorTexture",value:function(e){var t=this._colorAttachments.get(e);return t&&p(t)?t:null}},{key:"framebufferTexture2D",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:36064,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3553,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;t.framebufferTexture2D(t.FRAMEBUFFER,i,r,e,n)}},{key:"attachColorTexture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:36064;if(e){this._validateColorAttachmentPoint(t);var i=e.descriptor;this._validateTextureDimensions(i,this._desc),this._disposeColorAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(e.glName,this._context.gl,t)),this._colorAttachments.set(t,e)}}},{key:"detachColorTexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=this._colorAttachments.get(e);if(p(t)){var i=t;return this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(null,this._context.gl,e)),this._colorAttachments.delete(e),i}}},{key:"attachDepthStencilTexture",value:function(e){if(!(0,s.Wi)(e)){var t=e.descriptor;34041!==t.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),34042!==t.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!"),this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!"),this._validateTextureDimensions(t,this._desc),this._desc.depthStencilTarget&&4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4),this._disposeDepthStencilAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(e.glName,this._context.gl,c.Lu)),this._depthStencilTexture=e}}},{key:"detachDepthStencilTexture",value:function(){var e=this._depthStencilTexture;return e&&this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(null,this._context.gl,c.Lu)),this._depthStencilTexture=null,e}},{key:"attachDepthStencilBuffer",value:function(e){if(!(0,s.Wi)(e)){var t=e.descriptor;if(34041!==t.internalFormat&&33189!==t.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat"),g(t,this._desc),this._disposeDepthStencilAttachments(),this._desc.depthStencilTarget=34041===t.internalFormat?3:1,this._initialized){this._context.bindFramebuffer(this);var i=this._context.gl,r=1===this._desc.depthStencilTarget?i.DEPTH_ATTACHMENT:i.DEPTH_STENCIL_ATTACHMENT;i.framebufferRenderbuffer(i.FRAMEBUFFER,r,i.RENDERBUFFER,e.glName)}this._depthAttachment=e}}},{key:"detachDepthStencilBuffer",value:function(){var e=this._context.gl,t=this._depthAttachment;if(t&&this._initialized){this._context.bindFramebuffer(this);var i=1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,null)}return this._depthAttachment=null,t}},{key:"detachAll",value:function(){this.detachColorTexture(),this.detachDepthStencilBuffer(),this.detachDepthStencilTexture()}},{key:"copyToTexture",value:function(e,t,i,r,n,a,o){(e<0||t<0||n<0||a<0)&&console.error("Offsets cannot be negative!"),(i<=0||r<=0)&&console.error("Copy width and height must be greater than zero!");var s=this._desc,h=o.descriptor;3553!==o.descriptor.target&&console.error("Texture target must be TEXTURE_2D!"),(e+i>s.width||t+r>s.height||n+i>h.width||a+r>h.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");var c=this._context,u=c.bindTexture(o,l.Z.TEXTURE_UNIT_FOR_UPDATES);c.bindFramebuffer(this),c.gl.copyTexSubImage2D(3553,0,n,a,e,t,i,r),c.bindTexture(u,l.Z.TEXTURE_UNIT_FOR_UPDATES)}},{key:"readPixels",value:function(e,t,i,r,n,a,o){(i<=0||r<=0)&&console.error("Copy width and height must be greater than zero!"),o||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this),this._context.gl.readPixels(e,t,i,r,n,a,o)}},{key:"resize",value:function(e,t){var i=this._desc;if(i.width!==e||i.height!==t){if(!this._initialized)return i.width=e,i.height=t,this._colorAttachments.forEach((function(i){i&&i.resize(e,t)})),void(this._depthStencilTexture&&this._depthStencilTexture.resize(e,t));i.width=e,i.height=t,this._colorAttachments.forEach((function(i){i&&i.resize(e,t)})),null!=this._depthStencilTexture?this._depthStencilTexture.resize(e,t):(this._depthAttachment||this._stencilAttachment)&&(this._depthAttachment&&this._depthAttachment.resize(e,t),this._stencilAttachment&&this._stencilAttachment.resize(e,t)),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1}}},{key:"initializeAndBind",value:function(){var e,t,i,r,n=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3553,o=this._context.gl;if(this._initialized)o.bindFramebuffer(o.FRAMEBUFFER,this.glName);else{this._glName&&o.deleteFramebuffer(this._glName);var s=this._context,c=o.createFramebuffer(),d=this._desc,f=null!=(e=d.colorTarget)?e:1,_=null!=(t=d.width)?t:1,g=null!=(i=d.height)?i:1;if(o.bindFramebuffer(o.FRAMEBUFFER,c),0===this._colorAttachments.size)if(0===f)this._colorAttachments.set(36064,m(s,d,2===this.descriptor.colorTarget?34067:3553));else{var T=new u.Z(s,{internalFormat:32854,width:_,height:g});this._colorAttachments.set(36064,T)}this._colorAttachments.forEach((function(e,t){e&&(p(e)?n.framebufferTexture2D(e.glName,o,t,a):o.framebufferRenderbuffer(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.RENDERBUFFER,e.glName))}));var E=null!=(r=d.depthStencilTarget)?r:0;switch(E){case 1:case 3:this._depthAttachment||(this._depthAttachment=new u.Z(s,{internalFormat:1===d.depthStencilTarget?33189:34041,width:_,height:g}));var x=1===E?o.DEPTH_ATTACHMENT:o.DEPTH_STENCIL_ATTACHMENT;o.framebufferRenderbuffer(o.FRAMEBUFFER,x,o.RENDERBUFFER,this._depthAttachment.glName);break;case 2:this._stencilAttachment||(this._stencilAttachment=new u.Z(s,{internalFormat:36168,width:_,height:g})),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.STENCIL_ATTACHMENT,o.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:if(!this._depthStencilTexture){s.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!");var v={target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:_,height:g};this._depthStencilTexture=new l.Z(s,v)}this.framebufferTexture2D(this._depthStencilTexture.glName,o,o.DEPTH_STENCIL_ATTACHMENT,a)}(0,h.CG)()&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!"),this._glName=c,this._initialized=!0}}},{key:"_disposeColorAttachments",value:function(){var e=this;this._colorAttachments.forEach((function(t,i){if(p(t))e._initialized&&(e._context.bindFramebuffer(e),e.framebufferTexture2D(null,e._context.gl,i)),t.dispose();else if(t instanceof WebGLRenderbuffer){var r=e._context.gl;e._initialized&&(e._context.bindFramebuffer(e),r.framebufferRenderbuffer(r.FRAMEBUFFER,i,r.RENDERBUFFER,null)),e._context.gl.deleteRenderbuffer(t)}})),this._colorAttachments.clear()}},{key:"_disposeDepthStencilAttachments",value:function(){var e=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);var t=1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(e.FRAMEBUFFER,t,e.RENDERBUFFER,null)}this._depthAttachment.dispose(),this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null),this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(null,e,e.DEPTH_STENCIL_ATTACHMENT)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)}},{key:"_validateTextureDimensions",value:function(e,t){3553!==e.target&&34067!==e.target&&console.error("Texture type must be TEXTURE_2D or TEXTURE_CUBE_MAP!"),void 0!==t.width&&t.width>=0&&void 0!==t.height&&t.height>=0?t.width===e.width&&t.height===e.height||console.error("Color attachment texture must match the framebuffer's!"):(t.width=e.width,t.height=e.height)}},{key:"_validateColorAttachmentPoint",value:function(t){if(-1===e._MAX_COLOR_ATTACHMENTS){var i=this._context.capabilities.drawBuffers;if(i){var r=this._context.gl;e._MAX_COLOR_ATTACHMENTS=r.getParameter(i.MAX_COLOR_ATTACHMENTS)}else e._MAX_COLOR_ATTACHMENTS=1}var n=t-36064;n+1>e._MAX_COLOR_ATTACHMENTS&&f.error("esri.FrameBufferObject","illegal attachment point for color attachment: ".concat(n+1,". Implementation supports up to ").concat(e._MAX_COLOR_ATTACHMENTS," color attachments"))}}]),e}();function p(e){return"type"in e&&"texture"===e.type}function m(e,t,i){return new l.Z(e,{target:i,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:t.width,height:t.height})}function g(e,t){void 0!==t.width&&t.width>=0&&void 0!==t.height&&t.height>=0?t.width===e.width&&t.height===e.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(t.width=e.width,t.height=e.height)}_._MAX_COLOR_ATTACHMENTS=-1},68267:function(e,t,i){i.d(t,{Z:function(){return o}});var r=i(15671),n=i(43144),a=i(65706),o=function(){function e(t){(0,r.Z)(this,e),this._programCacheByTemplate=new Map,this._rctx=t}return(0,n.Z)(e,[{key:"dispose",value:function(){this._programCacheByTemplate.forEach((function(e){return e.programs.forEach((function(e){return e.dispose()}))})),this._programCacheByTemplate=null}},{key:"getProgram",value:function(e,t){var i=this;return this._programCacheByTemplate.has(e)||this.addProgramTemplate(e,(function(t){return(0,a.H)(i._rctx,e,t)})),this.getProgramTemplateInstance(e,t)}},{key:"addProgramTemplate",value:function(e,t){this._programCacheByTemplate.set(e,{constructor:t,programs:new Map})}},{key:"getProgramTemplateInstance",value:function(e,t){var i=this._programCacheByTemplate.get(e);if(i){var r=t?JSON.stringify(t):"default";if(!i.programs.has(r)){var n=i.constructor(t);i.programs.set(r,n)}return i.programs.get(r)}return null}}]),e}()},15880:function(e,t,i){i.d(t,{Z:function(){return o}});var r=i(15671),n=i(43144),a=i(8548),o=function(){function e(t,i){(0,r.Z)(this,e),this._context=t,this._desc=i,this._context.instanceCounter.increment(a._g.Renderbuffer,this);var n=this._context.gl;this.glName=n.createRenderbuffer(),this._context.bindRenderbuffer(this),n.renderbufferStorage(n.RENDERBUFFER,i.internalFormat,i.width,i.height)}return(0,n.Z)(e,[{key:"descriptor",get:function(){return this._desc}},{key:"resize",value:function(e,t){var i=this._desc;if(i.width!==e||i.height!==t){i.width=e,i.height=t;var r=this._context.gl;this._context.bindRenderbuffer(this),r.renderbufferStorage(r.RENDERBUFFER,i.internalFormat,i.width,i.height)}}},{key:"dispose",value:function(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(a._g.Renderbuffer,this),this._context=null)}}]),e}()},56648:function(e,t,i){i.d(t,{Z:function(){return a}});var r=i(15671),n=i(43144),a=function(){function e(t){(0,r.Z)(this,e),this.readFile=t}return(0,n.Z)(e,[{key:"resolveIncludes",value:function(e){return this.resolve(e)}},{key:"resolve",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;if(i.has(e))return i.get(e);var r=this.read(e);if(!r)throw new Error("cannot find shader file ".concat(e));for(var n=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm,a=n.exec(r),o=[];null!=a;)o.push({path:a[1],start:a.index,length:a[0].length}),a=n.exec(r);var s=0,h="";return o.forEach((function(e){h+=r.slice(s,e.start),h+=i.has(e.path)?"":t.resolve(e.path,i),s=e.start+e.length})),h+=r.slice(s),i.set(e,h),h}},{key:"read",value:function(e){return this.readFile(e)}}]),e}()},51378:function(e,t,i){i.d(t,{Z:function(){return l}});var r=i(1413),n=i(15671),a=i(43144),o=i(16889),s=i(92026),h=i(37825),c=i(8548),u=i(30308),l=function(){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,n.Z)(this,e),this._context=t,this.type="texture",this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,t.instanceCounter.increment(c._g.Texture,this),this._descriptor=(0,r.Z)({target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1},i),34067===this._descriptor.target?this.setDataCubeMap(a):this.setData(a)}return(0,a.Z)(e,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._descriptor}},{key:"isDirty",get:function(){return this._samplingModeDirty||this._wrapModeDirty}},{key:"dispose",value:function(){this._context.gl&&this._glName&&(this._context.unbindTextureAllUnits(this),this._context.gl.deleteTexture(this._glName),this._glName=null,this._context.instanceCounter.decrement(c._g.Texture,this))}},{key:"release",value:function(){this.dispose()}},{key:"resize",value:function(e,t){var i=this._descriptor;i.width===e&&i.height===t||(i.width=e,i.height=t,34067===this._descriptor.target?this.setDataCubeMap(null):this.setData(null))}},{key:"setDataCubeMap",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=34069;t<=34074;t++)this.setData(e,t)}},{key:"setData",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3553;if(this._context&&this._context.gl){var r=this._context.gl;this._glName||(this._glName=r.createTexture()),void 0===t&&(t=null),null===t&&(this._descriptor.width=this._descriptor.width||4,this._descriptor.height=this._descriptor.height||4);var n=this._context.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES),a=this._descriptor;e._validateTexture(this._context,a),r.pixelStorei(r.UNPACK_ALIGNMENT,a.unpackAlignment),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,a.flipped?1:0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.preMultiplyAlpha?1:0);var o=a.pixelFormat,c=a.internalFormat?a.internalFormat:this._deriveInternalFormat(o,a.dataType);if(t instanceof ImageData||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement){var u=t.width,l=t.height;t instanceof HTMLVideoElement&&(u=t.videoWidth,l=t.videoHeight),a.width&&a.height,r.texImage2D(i,0,c,o,a.dataType,t),(0,h.zu)(r),a.hasMipmap&&this.generateMipmap(),void 0===a.width&&(a.width=u),void 0===a.height&&(a.height=l)}else{null!=a.width&&null!=a.height||console.error("Width and height must be specified!"),r.DEPTH24_STENCIL8&&c===r.DEPTH_STENCIL&&(c=r.DEPTH24_STENCIL8);var f=a.width,_=a.height;if(d(t)){var p=Math.round(Math.log(Math.max(f,_))/Math.LN2)+1;a.hasMipmap=a.hasMipmap&&p===t.levels.length;for(var m=0;;++m){var g=t.levels[Math.min(m,t.levels.length-1)];if(r.compressedTexImage2D(i,m,c,f,_,0,g),1===f&&1===_||!a.hasMipmap)break;f=Math.max(1,f>>1),_=Math.max(1,_>>1)}}else if((0,s.pC)(t))r.texImage2D(i,0,c,f,_,0,o,a.dataType,t),(0,h.zu)(r),a.hasMipmap&&this.generateMipmap();else for(var T=0;r.texImage2D(i,T,c,f,_,0,o,a.dataType,null),(0,h.zu)(r),(1!==f||1!==_)&&a.hasMipmap;++T)f=Math.max(1,f>>1),_=Math.max(1,_>>1)}e._applySamplingMode(r,this._descriptor),e._applyWrapMode(r,this._descriptor),e._applyAnisotropicFilteringParameters(this._context,this._descriptor),(0,h.zu)(r),this._context.bindTexture(n,e.TEXTURE_UNIT_FOR_UPDATES)}}},{key:"updateData",value:function(t,i,r,n,a,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:3553;o||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");var h=this._context.gl,c=this._descriptor,u=this._context.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);(i<0||r<0||n>c.width||a>c.height||i+n>c.width||r+a>c.height)&&console.error("An attempt to update out of bounds of the texture!"),h.pixelStorei(h.UNPACK_ALIGNMENT,c.unpackAlignment),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,c.flipped?1:0),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.preMultiplyAlpha?1:0),o instanceof ImageData||o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement?h.texSubImage2D(s,t,i,r,c.pixelFormat,c.dataType,o):h.texSubImage2D(s,t,i,r,n,a,c.pixelFormat,c.dataType,o),this._context.bindTexture(u,e.TEXTURE_UNIT_FOR_UPDATES)}},{key:"generateMipmap",value:function(){var t=this._descriptor;t.hasMipmap||(t.hasMipmap=!0,this._samplingModeDirty=!0,e._validateTexture(this._context,t)),9729===t.samplingMode?(this._samplingModeDirty=!0,t.samplingMode=9985):9728===t.samplingMode&&(this._samplingModeDirty=!0,t.samplingMode=9984);var i=this._context.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);this._context.gl.generateMipmap(t.target),this._context.bindTexture(i,e.TEXTURE_UNIT_FOR_UPDATES)}},{key:"setSamplingMode",value:function(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}},{key:"setWrapMode",value:function(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,e._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}},{key:"applyChanges",value:function(){var t=this._context.gl,i=this._descriptor;this._samplingModeDirty&&(e._applySamplingMode(t,i),this._samplingModeDirty=!1),this._wrapModeDirty&&(e._applyWrapMode(t,i),this._wrapModeDirty=!1)}},{key:"_deriveInternalFormat",value:function(e,t){if("webgl"===this._context.webglVersion)return e;if(5126===t)switch(e){case 6408:return 34836;case 6407:return 34837;default:throw new Error("Unable to derive format")}return e}}],[{key:"_validateTexture",value:function(e,t){(t.width<0||t.height<0)&&console.error("Negative dimension parameters are not allowed!");var i=(0,o.wt)(t.width)&&(0,o.wt)(t.height);(0,u.Z)(e.gl)||i||("number"==typeof t.wrapMode?33071!==t.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):33071===t.wrapMode.s&&33071===t.wrapMode.t||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),t.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))}},{key:"_applySamplingMode",value:function(e,t){var i=t.samplingMode,r=t.samplingMode;9985===i||9987===i?(i=9729,t.hasMipmap||(r=9729)):9984!==i&&9986!==i||(i=9728,t.hasMipmap||(r=9728)),e.texParameteri(t.target,e.TEXTURE_MAG_FILTER,i),e.texParameteri(t.target,e.TEXTURE_MIN_FILTER,r)}},{key:"_applyWrapMode",value:function(e,t){"number"==typeof t.wrapMode?(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode.t))}},{key:"_applyAnisotropicFilteringParameters",value:function(e,t){var i,r=e.capabilities.textureFilterAnisotropic;r&&e.gl.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY,null!=(i=t.maxAnisotropy)?i:1)}}]),e}();function d(e){return(0,s.pC)(e)&&"type"in e&&"compressed"===e.type}l.TEXTURE_UNIT_FOR_UPDATES=0},30308:function(e,t,i){function r(e){return window.WebGL2RenderingContext&&e instanceof window.WebGL2RenderingContext}i.d(t,{Z:function(){return r}})},37825:function(e,t,i){i.d(t,{zu:function(){return c},hZ:function(){return s},CG:function(){return h}});var r=i(10064),n=i(93169),a=i(32718).Z.getLogger("esri/views/webgl");var o=!!(0,n.Z)("enable-feature:webgl-debug");function s(){return o}function h(){return o}function c(e){if(s()){var t=e.getError();if(t){var i=function(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}(e,t),n=(new Error).stack;a.error(new r.Z("webgl-error","WebGL error occured",{message:i,stack:n}))}}}},8548:function(e,t,i){i.d(t,{Ld:function(){return n},Lu:function(){return a},_g:function(){return r}});var r,n=33984;!function(e){e[e.Texture=0]="Texture",e[e.Buffer=1]="Buffer",e[e.VAO=2]="VAO",e[e.VertexShader=3]="VertexShader",e[e.FragmentShader=4]="FragmentShader",e[e.Program=5]="Program",e[e.Framebuffer=6]="Framebuffer",e[e.Renderbuffer=7]="Renderbuffer",e[e.COUNT=8]="COUNT"}(r||(r={}));var a=33306},65706:function(e,t,i){i.d(t,{H:function(){return a},K:function(){return n}});var r=i(9256);function n(e){var t="";for(var i in e){var r=e[i];if("boolean"==typeof r)r&&(t+="#define ".concat(i,"\n"));else if("number"==typeof r)t+="#define ".concat(i," ").concat(r.toFixed(),"\n");else if("object"==typeof r){var n=r.options,a=0;for(var o in n)t+="#define ".concat(n[o]," ").concat((a++).toFixed(),"\n");t+="#define ".concat(i," ").concat(n[r.value],"\n")}}return t}function a(e,t,i,n){i=i||{},n=n||"";var a="function"==typeof t.shaders?t.shaders(i):t.shaders;return new r.$(e,n+a.vertexShader,n+a.fragmentShader,t.attributes)}}}]);
//# sourceMappingURL=5461.5c1483a1.chunk.js.map