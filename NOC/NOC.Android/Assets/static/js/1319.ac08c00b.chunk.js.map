{"version":3,"file":"static/js/1319.ac08c00b.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/BitmapTileLayerView2D.js","../node_modules/@arcgis/core/views/2d/layers/TileLayerView2D.js","../node_modules/@arcgis/core/views/layers/TileLayerView.js","../node_modules/@arcgis/core/views/2d/layers/support/imageUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{BitmapTileContainer as t}from\"../engine/BitmapTileContainer.js\";const r=r=>{let s=class extends r{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new t(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){var e;this.container.removeChild(this._bitmapView),null==(e=this._bitmapView)||e.removeAllChildren()}};return s=e([i(\"esri.views.2d.layers.BitmapTileLayerView2D\")],s),s};export{r as BitmapTileLayerView2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import i from\"../../../core/Logger.js\";import{isAbortError as s}from\"../../../core/promiseUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{BitmapTileLayerView2D as l}from\"./BitmapTileLayerView2D.js\";import{LayerView2DMixin as o}from\"./LayerView2D.js\";import{createBlankImage as h,resampleImage as n}from\"./support/imageUtils.js\";import c from\"../tiling/TileInfoView.js\";import u from\"../tiling/TileKey.js\";import p from\"../tiling/TileQueue.js\";import f from\"../tiling/TileStrategy.js\";import m from\"../../layers/LayerView.js\";import{RefreshableLayerView as y}from\"../../layers/RefreshableLayerView.js\";import{TileLayerView as w}from\"../../layers/TileLayerView.js\";import{createQueryGeometry as g}from\"../../support/drapedUtils.js\";const d=i.getLogger(\"esri.views.2d.layers.TileLayerView2D\"),_=[0,0];let I=class extends(w(y(l(o(m))))){constructor(){super(...arguments),this._tileStrategy=null,this._fetchQueue=null,this.layer=null}initialize(){const e=this.layer.tileInfo,i=e&&e.spatialReference;let s;i||(s=new t(\"layerview:tiling-information-missing\",\"The layer doesn't provide tiling information\",{layer:this.layer})),i.equals(this.view.spatialReference)||(s=new t(\"layerview:spatial-reference-incompatible\",\"The spatial reference of this layer does not meet the requirements of the view\",{layer:this.layer})),this.watch(\"resampling\",(()=>{this.doRefresh()})),s&&this.addResolvingPromise(Promise.reject(s))}get resampling(){return!(\"resampling\"in this.layer)||!1!==this.layer.resampling}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume(),this.notifyChange(\"updating\")}attach(){const e=\"tileServers\"in this.layer?this.layer.tileServers:null;this._tileInfoView=new c(this.layer.tileInfo,this.layer.fullExtent),this._fetchQueue=new p({tileInfoView:this._tileInfoView,concurrency:e&&10*e.length||10,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new f({cachePolicy:\"keep\",resampling:this.resampling,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),this.requestUpdate(),this.container.requestRender(),super.attach()}detach(){super.detach(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQueryGeometry(e,t){return g(e,t,this.view)}async doRefresh(){this.updateRequested||this.suspended||(this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((e=>this._enqueueTileFetch(e))),this.notifyChange(\"updating\"))}isUpdating(){var e;return(null==(e=this._fetchQueue)?void 0:e.length)>0}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(_,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this._bitmapView.addChild(t),this.requestUpdate(),t}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>e.destroy())),this.requestUpdate()}async fetchTile(e,t={}){const i=\"tilemapCache\"in this.layer?this.layer.tilemapCache:null,{signal:r,resamplingLevel:a=0}=t;if(!i)try{return await this._fetchImage(e,r)}catch(c){if(!s(c)&&!this.resampling)return h(this._tileInfoView.tileInfo.size);if(a<3){const i=this._tileInfoView.getTileParentId(e.id);if(i){const s=new u(i),r=await this.fetchTile(s,{...t,resamplingLevel:a+1});return n(this._tileInfoView,r,s,e)}}throw c}const l=new u(0,0,0,0);let o;try{if(await i.fetchAvailabilityUpsample(e.level,e.row,e.col,l,{signal:r}),l.level!==e.level&&!this.resampling)return h(this._tileInfoView.tileInfo.size);o=await this._fetchImage(l,r)}catch(c){if(s(c))throw c;o=await this._fetchImage(e,r)}return this.resampling?n(this._tileInfoView,o,l,e):o}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);e.bitmap.source=t,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once(\"attach\",(()=>this.requestUpdate()))}catch(t){s(t)||d.error(t)}this.requestUpdate()}}async _fetchImage(e,t){return this.layer.fetchTile(e.level,e.row,e.col,{signal:t})}};e([r()],I.prototype,\"resampling\",null),I=e([a(\"esri.views.2d.layers.TileLayerView2D\")],I);const T=I;export{T as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import{eachAlways as o}from\"../../core/promiseUtils.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{calculateTolerance as p}from\"../../renderers/support/clickToleranceUtils.js\";const i=i=>{let c=class extends i{async fetchPopupFeatures(e,s){const{layer:a}=this;if(!e)return Promise.reject(new r(\"tilelayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:a}));if(\"tile\"!==a.type)return Promise.reject(new r(\"tilelayerview:fetchPopupFeatures\",\"Layer type should be 'tile'\",{type:a.type}));const i=this.get(\"view.scale\"),c=a.allSublayers.toArray().filter((e=>{const r=0===e.minScale||i<=e.minScale,t=0===e.maxScale||i>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&r&&t}));return o(c.map((async r=>{const o=r.createQuery(),a=t(s)?s.event:null,i=p({renderer:r.renderer,event:a});o.geometry=this.createFetchPopupFeaturesQueryGeometry(e,i),o.outFields=await r.popupTemplate.getRequiredFields();return(await r.queryFeatures(o)).features}))).then((e=>[].concat(...e.map((e=>e.value)).filter(Boolean))))}};return e([s()],c.prototype,\"layer\",void 0),c=e([a(\"esri.layers.mixins.TileLayerView\")],c),c};export{i as TileLayerView,i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction e(e){return e instanceof HTMLImageElement?e.naturalWidth:e.width}function t(e){return e instanceof HTMLImageElement?e.naturalHeight:e.height}function n(n,l,r,u){if(r.level===u.level)return l;const i=n.tileInfo.size,a=n.getTileResolution(r.level),c=n.getTileResolution(u.level);let g=n.getLODInfoAt(u.level);const h=g.getXForColumn(u.col),d=g.getYForRow(u.row);g=n.getLODInfoAt(r.level);const f=g.getXForColumn(r.col),s=g.getYForRow(r.row),m=e(l)/i[0],v=t(l)/i[1],w=Math.round(m*((h-f)/a)),I=Math.round(v*(-(d-s)/a)),M=Math.round(m*i[0]*(c/a)),F=Math.round(v*i[1]*(c/a)),L=o(i);return L.getContext(\"2d\").drawImage(l,w,I,M,F,0,0,i[0],i[1]),L}function o(e){const t=document.createElement(\"canvas\");return[t.width,t.height]=e,t}export{o as createBlankImage,n as resampleImage};\n"],"names":["r","s","this","view","timeline","record","layer","title","_bitmapView","t","_tileInfoView","container","addChild","e","removeChild","removeAllChildren","i","d","_","I","arguments","_tileStrategy","_fetchQueue","tileInfo","spatialReference","equals","watch","doRefresh","addResolvingPromise","Promise","reject","resampling","pause","state","update","resume","notifyChange","tileServers","c","fullExtent","p","tileInfoView","concurrency","length","process","fetchTile","f","cachePolicy","acquireTile","releaseTile","requestUpdate","requestRender","destroy","clear","g","updateRequested","suspended","reset","tiles","forEach","_enqueueTileFetch","createTile","bitmap","getTileCoords","key","x","y","resolution","getTileResolution","size","width","height","abort","id","once","a","tilemapCache","signal","resamplingLevel","_fetchImage","h","getTileParentId","u","n","l","fetchAvailabilityUpsample","level","row","col","o","has","push","source","error","type","get","allSublayers","toArray","filter","minScale","maxScale","popupTemplate","popupEnabled","visible","map","createQuery","event","renderer","geometry","createFetchPopupFeaturesQueryGeometry","getRequiredFields","outFields","queryFeatures","features","then","concat","value","Boolean","prototype","w","m","T","getLODInfoAt","getXForColumn","getYForRow","HTMLImageElement","naturalWidth","v","naturalHeight","Math","round","M","F","L","getContext","drawImage","document","createElement"],"sourceRoot":""}