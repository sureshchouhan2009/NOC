"use strict";(self.webpackChunketihadrailapp=self.webpackChunketihadrailapp||[]).push([[3293],{33293:function(e,t,i){i.r(t),i.d(t,{default:function(){return ce}});var n,a=i(15671),s=i(43144),r=i(60136),o=i(29388),l=i(27366),u=i(66978),c=i(68860),d=i(8025),h=(i(63780),i(93169),i(25243),i(49861)),p=i(69912),v=i(27496),y=i(1413),_=i(80573),m=i(84652),f=i(92026),b=i(53866),w=i(7882),g=n=function(e){(0,r.Z)(i,e);var t=(0,o.Z)(i);function i(e){var n;return(0,a.Z)(this,i),(n=t.call(this,e)).type="direct-line-measurement",n.startPoint=null,n.endPoint=null,n.unit=null,n}return(0,s.Z)(i,[{key:"extent",get:function(){if((0,f.Wi)(this.startPoint))return null;var e=b.Z.fromPoint(this.startPoint);return(0,f.pC)(this.endPoint)&&e.union(b.Z.fromPoint(this.endPoint)),e}},{key:"clone",value:function(){return new n((0,y.Z)({startPoint:(0,m.d9)(this.startPoint),endPoint:(0,m.d9)(this.endPoint),unit:this.unit},this.cloneBaseAnalysisProperties()))}}]),i}(_.Z);(0,l._)([(0,h.Cb)({readOnly:!0})],g.prototype,"type",void 0),(0,l._)([(0,h.Cb)({type:w.Z})],g.prototype,"startPoint",void 0),(0,l._)([(0,h.Cb)({type:w.Z})],g.prototype,"endPoint",void 0),(0,l._)([(0,h.Cb)()],g.prototype,"extent",null),(0,l._)([(0,h.Cb)({type:c.oD,value:null})],g.prototype,"unit",void 0);var P,C,k=g=n=(0,l._)([(0,p.j)("esri.analysis.DirectLineMeasurement")],g),M=i(32718),L=i(77671),D=(i(59486),i(100)),S=i(94172),V=i(37818),x=i(51328),T=i(29439),Z=i(15861),O=i(87757),U=i(85015),A=i(17842),z=i(8537),I=i(71353),R=i(85981),W=i(83639),E=(0,s.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,a.Z)(this,e),this.type=t,this.scenePoint=i,this.mapPoint=n})),H=i(82232),q=i(75508),G=i(77648),B=i(13679),j={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:.75,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5};(C=P||(P={})).Manipulators="manipulators",C.AnalysisViewDestroyed="analysis-view-destroyed",C.AnalysisView="analysis-view";var Y=function(e){(0,r.Z)(i,e);var t=(0,o.Z)(i);function i(e){var n;return(0,a.Z)(this,i),(n=t.call(this,e))._state="pending",n.analysisView=null,n.cursorPoint=null,n._visible=!1,n._laserLine=null,n._handles=new D.Z,n._lastDraggedHandle=null,n}return(0,s.Z)(i,[{key:"normalizeCtorArgs",value:function(e){return(0,y.Z)((0,y.Z)({},e),{},{params:e.params?(0,H.gh)(j,e.params):(0,H.gh)(j,{})})}},{key:"initialize",value:function(){this._intersector=(0,B.Z8)(this.view.state.viewingMode),this._intersector.options.store=0,this._promise=this._initialize()}},{key:"_initialize",value:function(){var e=(0,Z.Z)(O.mark((function e(){var t;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this._state,e.next="pending"===e.t0?3:"destroyed"===e.t0?4:5;break;case 3:return e.abrupt("break",5);case 4:return e.abrupt("return",Promise.reject("DirectLineMeasurement3DView already destroyed"));case 5:return e.next=7,this.view.whenAnalysisView(this.analysis);case 7:return t=e.sent,e.next=10,t.whenReady();case 10:return this._set("analysisView",t),this._laserLine=new q.W({view:this.view,attached:!0}),this._visible&&this._updateVisibility(this._visible),this._connectToAnalysisView(),this._state="ready",e.abrupt("return",t);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){switch(this._state){case"pending":return void(this._state="destroyed");case"ready":break;default:return}this.hide(),this._handles=(0,f.SC)(this._handles),this._laserLine=(0,f.SC)(this._laserLine),this._state="destroyed"}},{key:"when",value:function(){return this._promise.then((function(){}))}},{key:"whenMessages",value:function(){var e=(0,Z.Z)(O.mark((function e(){var t;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._promise;case 2:return t=e.sent,e.next=5,(0,z.cm)(t,"updating");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requiresCursorPoint",get:function(){return"initial"===this.toolState.lineState&&this.toolState.active}},{key:"visible",get:function(){return this._visible},set:function(e){e?this.show():this.hide()}},{key:"viewMode",get:function(){var e=this.analysisView;return(0,f.pC)(e)&&!e.destroyed?e.viewMode:0}},{key:"measurementMode",get:function(){var e=this.analysisView;return(0,f.pC)(e)&&!e.destroyed?e.actualVisualizedMeasurement:"euclidean"}},{key:"testData",get:function(){var e=this._laserLine.testData,t=(0,f.Wg)(this.analysisView).testData;return{labels:null==t?void 0:t.labels,stripeLength:null==t?void 0:t.stripeLength,laserLineRenderer:{heightManifoldEnabled:!!(0,f.pC)(e)&&e.heightManifoldEnabled,heightManifoldTarget:(0,f.pC)(e)?e.heightManifoldTarget:null,pointDistanceEnabled:!!(0,f.pC)(e)&&e.pointDistanceEnabled,pointDistanceOrigin:(0,f.pC)(e)?e.pointDistanceOrigin:null,pointDistanceTarget:(0,f.pC)(e)?e.pointDistanceTarget:null,lineVerticalPlaneEnabled:!!(0,f.pC)(e)&&e.lineVerticalPlaneEnabled}}}},{key:"directLabelText",get:function(){var e=this.analysisView;return(0,f.pC)(e)&&!e.destroyed?e.directLabelText:null}},{key:"horizontalLabelText",get:function(){var e=this.analysisView;return(0,f.pC)(e)&&!e.destroyed?e.horizontalLabelText:null}},{key:"verticalLabelText",get:function(){var e=this.analysisView;return(0,f.pC)(e)&&!e.destroyed?e.verticalLabelText:null}},{key:"_cursorPosition",get:function(){var e=this,t=(0,I.c)();return(0,f.yw)(this.cursorPoint,(function(i){return e.view.renderCoordsHelper.toRenderCoords(i,t)})),t}},{key:"_startPosition",get:function(){var e=this,t=(0,I.c)();return(0,f.yw)(this.analysis.startPoint,(function(i){return e.view.renderCoordsHelper.toRenderCoords(i,t)})),t}},{key:"_endPosition",get:function(){var e=this,t=(0,I.c)();return(0,f.yw)(this.analysis.endPoint,(function(i){return e.view.renderCoordsHelper.toRenderCoords(i,t)})),t}},{key:"_laserLineParams",get:function(){var e=this._focusPosition,t=this.toolState,i=t.active,n=t.lineState,a=this.viewMode,s=this.analysisView,r=this.params.laserLineEnabled&&!!e&&"measured"!==n&&i;if(!r||!this.visible||(0,f.Wi)(s)||s.destroyed)return{heightManifoldTarget:null,pointDistanceLine:null,lineVerticalPlaneSegment:null};var o=s.actualVisualizedMeasurement,l=r&&2===a;return{heightManifoldTarget:"euclidean"===o?e:null,pointDistanceLine:"local"!==this.view.viewingMode&&r&&this.analysis.startPoint&&"geodesic"===o?this._pointDistanceLine:null,lineVerticalPlaneSegment:l?(0,R.zk)(this._startPosition,this._endPosition):null}}},{key:"_focusPosition",get:function(){var e=this.toolState.lineState,t=this.analysisView,i=(0,f.pC)(t)&&!t.destroyed&&1===t.measurementMode,n=1===this.viewMode&&i;switch(e){case"drawing":return n?this._startPosition:this.analysis.endPoint?this._endPosition:this._startPosition;case"editing":return n?"start"===this._lastDraggedHandle?this._endPosition:this._startPosition:"start"===this._lastDraggedHandle?this._startPosition:this._endPosition;default:return(0,f.pC)(this.cursorPoint)?this._cursorPosition:null}}},{key:"_pointDistanceLine",get:function(){return{origin:"drawing"===this.toolState.lineState||"end"===this._lastDraggedHandle?this._startPosition:this._endPosition,target:this._focusPosition}}},{key:"measurementSurfaceLocation",get:function(){var e=this.toolState.startPointSurfaceLocation,t=this.toolState.endPointSurfaceLocation;return null==e||null==t||"above-the-surface"===e&&"below-the-surface"===t||"below-the-surface"===e&&"above-the-surface"===t||"on-the-surface"===e&&"on-the-surface"===t?"camera-dependent":"above-the-surface"===e||"above-the-surface"===t?"above-the-surface":"below-the-surface"}},{key:"createManipulators",value:function(){var e=this,t=function(){var t=(0,W.aD)(e.view,e.params.handleColor,e.params.handleOpacity);return t.available=!1,t.radius=e.params.handleRadius,t},i=t(),n=t();(0,f.pC)(this.analysis.startPoint)&&(i.location=this.analysis.startPoint,i.available=!0),(0,f.pC)(this.analysis.endPoint)&&(n.location=this.analysis.endPoint,n.available=!0);var a=function(){var t=e._lastDraggedHandle;i.grabbing&&!n.grabbing&&(t="start"),n.grabbing&&!i.grabbing&&(t="end"),i.grabbing||n.grabbing||(t=null),e._lastDraggedHandle=t},s=i.events.on("grab-changed",a),r=n.events.on("grab-changed",a);return this._handles.add([s,r],P.Manipulators),{start:i,end:n}}},{key:"show",value:function(){switch(this._state){case"ready":this._visible||this._updateVisibility(!0);break;case"pending":this._visible=!0;break;default:return}}},{key:"hide",value:function(){switch(this._state){case"ready":this._visible&&this._updateVisibility(!1);break;case"pending":this._visible=!1;break;default:return}}},{key:"clearMeasurement",value:function(){this.toolState.lineState="initial",this._clearOverride("measurementSurfaceLocation")}},{key:"finishMeasurement",value:function(){if(!this._isOverridden("measurementSurfaceLocation")){var e=this.measurementSurfaceLocation,t="camera-dependent"===e?this.view.state.camera.aboveGround?"above-the-surface":"below-the-surface":e;this._override("measurementSurfaceLocation",t)}this.toolState.lineState="measured"}},{key:"_connectToAnalysisView",value:function(){var e=this;this._handles.remove(P.AnalysisView),this._handles.add([(0,S.Ym)((function(){return(0,f.yw)(e.analysisView,(function(e){return e.destroyed}))}),(function(t){t&&e._handles.remove(P.AnalysisView)}),S.nn),(0,S.Ym)((function(){return["measured"===e.toolState.lineState,e.analysisView]}),(function(e){var t=(0,T.Z)(e,2),i=t[0],n=t[1];(0,f.pC)(n)&&!n.destroyed&&(n.allowVisualElementsOrientationChange=!i)}),S.nn),(0,S.Ym)((function(){return e._laserLineParams}),(function(t){var i=e._laserLine;i.heightManifoldTarget=t.heightManifoldTarget,i.pointDistanceLine=t.pointDistanceLine,i.lineVerticalPlaneSegment=t.lineVerticalPlaneSegment}),S.nn)],P.AnalysisView)}},{key:"_updateVisibility",value:function(e){this._visible=e,this.analysis.visible=e,e?this._laserLine.style={innerColor:this.params.laserLineInnerColor,innerWidth:this.params.laserLineInnerWidth,glowColor:this.params.laserLineGlowColor,glowWidth:this.params.laserLineGlowWidth,glowFalloff:this.params.laserLineGlowFalloff,globalAlpha:this.params.laserLineGlobalAlpha}:this.view.cursor=null,this._laserLine.visible=e}},{key:"pick",value:function(e){var t=this.view.spatialReference,i=(0,A.md)(e.screenPoint);this.view.sceneIntersectionHelper.intersectToolIntersectorScreen(i,this._intersector);var n=this._intersector.results.min,a=(0,I.c)();if(!n.getIntersectionPoint(a))return new E;var s=this.view.renderCoordsHelper.fromRenderCoords(a,t);if((0,f.Wi)(s))return new E;var r=2===n.intersector?"ground":"feature";return new E(r,a,s)}},{key:"getElevation",value:function(e){return this.view.basemapTerrain.ready?(0,f.Pt)((0,G.KO)(this.view.elevationProvider,e),0):0}},{key:"overlappingHandles",value:function(e,t){return(0,H.Vl)(e,t,this.view)<=this.params.handleRadius}}]),i}(U.Z);(0,l._)([(0,h.Cb)()],Y.prototype,"view",void 0),(0,l._)([(0,h.Cb)()],Y.prototype,"params",void 0),(0,l._)([(0,h.Cb)({readOnly:!0})],Y.prototype,"analysisView",void 0),(0,l._)([(0,h.Cb)()],Y.prototype,"analysis",void 0),(0,l._)([(0,h.Cb)()],Y.prototype,"cursorPoint",void 0),(0,l._)([(0,h.Cb)()],Y.prototype,"toolState",void 0),(0,l._)([(0,h.Cb)()],Y.prototype,"requiresCursorPoint",null),(0,l._)([(0,h.Cb)()],Y.prototype,"visible",null),(0,l._)([(0,h.Cb)()],Y.prototype,"viewMode",null),(0,l._)([(0,h.Cb)()],Y.prototype,"measurementMode",null),(0,l._)([(0,h.Cb)()],Y.prototype,"testData",null),(0,l._)([(0,h.Cb)()],Y.prototype,"directLabelText",null),(0,l._)([(0,h.Cb)()],Y.prototype,"horizontalLabelText",null),(0,l._)([(0,h.Cb)()],Y.prototype,"verticalLabelText",null),(0,l._)([(0,h.Cb)()],Y.prototype,"_visible",void 0),(0,l._)([(0,h.Cb)()],Y.prototype,"_laserLine",void 0),(0,l._)([(0,h.Cb)()],Y.prototype,"_cursorPosition",null),(0,l._)([(0,h.Cb)()],Y.prototype,"_startPosition",null),(0,l._)([(0,h.Cb)()],Y.prototype,"_endPosition",null),(0,l._)([(0,h.Cb)()],Y.prototype,"_lastDraggedHandle",void 0),(0,l._)([(0,h.Cb)()],Y.prototype,"_laserLineParams",null),(0,l._)([(0,h.Cb)()],Y.prototype,"_focusPosition",null),(0,l._)([(0,h.Cb)()],Y.prototype,"_pointDistanceLine",null),(0,l._)([(0,h.Cb)()],Y.prototype,"measurementSurfaceLocation",null),Y=(0,l._)([(0,p.j)("esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DView")],Y);var F=(0,s.Z)((function e(){(0,a.Z)(this,e)})),J=i(38316),K=i(74229),X=i(45900),N=i(72612),Q=function(e){(0,r.Z)(i,e);var t=(0,o.Z)(i);function i(e){var n;return(0,a.Z)(this,i),(n=t.call(this,e))._handles=new D.Z,n._cachedPickRequest=new F,n._cachedPickResult=new E,n._isAnyPointerDown=!1,n.lineState="initial",n.startPointSurfaceLocation=null,n.endPointSurfaceLocation=null,n.startManipulator=null,n.endManipulator=null,n}return(0,s.Z)(i,[{key:"initialize",value:function(){var e=this;this.measurementView=new Y({toolState:this,view:this.view,analysis:this.analysis,cursorPoint:this.cursorPoint}),this.measurementView.when().then((function(){return e._initialize()}))}},{key:"_initialize",value:function(){var e=this,t=this.measurementView.createManipulators(),i=t.start,n=t.end,a=function(t,i,n){return(0,K.Xd)(t,(function(t,a,s){var r=(0,x.J4)(t);a.next(r).next((0,x.gv)(e.view)).next((function(e){return"start"!==e.action?e:null})).next((function(a){var s=(0,V.WG)(a.mapEnd,new w.Z);e.analysis[i]=s,t.location=s,e[n]=e._surfaceLocation(s,a.surfaceType)})),s.next(r).next((0,K.di)(e.analysis,[i])).next((0,K.di)(e,[n])).next((function(){t.location=(0,f.Wg)(e.analysis[i])}))}))};this._handles.add([a(i,"startPoint","startPointSurfaceLocation"),a(n,"endPoint","endPointSurfaceLocation")]),[i,n].forEach((function(t){e._handles.add([t.events.on("grab-changed",(function(){var t=i.grabbing||n.grabbing;t&&"measured"===e.lineState&&(e.lineState="editing"),t||(e.measurementView.finishMeasurement(),"editing"===e.lineState&&(e.lineState="measured"))}))])})),this.manipulators.add(i),this.manipulators.add(n),this.startManipulator=i,this.endManipulator=n,this._handles.add((0,S.Ym)((function(){return e.state}),(function(t){"measured"===t?e.complete():e.finishToolCreation()}),S.Z_)),"measured"===this.state?this.complete():this.startToolCreation()}},{key:"destroy",value:function(){this.measurementView.destroy(),this._set("measurementView",null),this._handles=(0,f.SC)(this._handles)}},{key:"state",get:function(){return this.analysis.startPoint?"measured"===this.lineState?"measured":"measuring":"ready"}},{key:"creating",get:function(){return"initial"===this.lineState||"drawing"===this.lineState}},{key:"cursor",get:function(){return!this.active||"drawing"!==this.lineState&&"initial"!==this.lineState?null:"crosshair"}},{key:"cursorPoint",set:function(e){this._set("cursorPoint",e),this.measurementView.cursorPoint=e}},{key:"validMeasurement",get:function(){return(0,f.pC)(this.analysis.startPoint)&&(0,f.pC)(this.analysis.endPoint)}},{key:"onDetach",value:function(){this.analysis.startPoint=null,this.analysis.endPoint=null,this.cursorPoint=null,this.measurementView.clearMeasurement()}},{key:"onShow",value:function(){this.measurementView.show(),this.created&&this._updateManipulatorVisibility()}},{key:"onHide",value:function(){this.created&&this.measurementView.hide()}},{key:"onInputEvent",value:function(e){switch(e.type){case"immediate-click":this._handleImmediateClick(e);break;case"pointer-move":this._handlePointerMove(e);break;case"pointer-down":this._handlePointerDown();break;case"pointer-up":this._handlePointerUp()}this._updateManipulatorVisibility()}},{key:"_handlePointerMove",value:function(e){this._clearCachedPickRequest();var t=(0,N.vT)(e);"mouse"===e.pointerType&&(this._hoverAt(t),"drawing"===this.lineState&&(this.endManipulator.events.emit("drag",{action:"update",start:t,screenPoint:t}),e.stopPropagation()))}},{key:"_handlePointerDown",value:function(){this._isAnyPointerDown=!0}},{key:"_handlePointerUp",value:function(){this._isAnyPointerDown=!1}},{key:"_handleImmediateClick",value:function(e){if(this._clearCachedPickRequest(),J.Z.isPrimaryPointerAction(e)){var t=(0,N.vT)(e),i=e.pointerType,n=!1;if(this.active)switch(this.lineState){case"initial":this.startManipulator.events.emit("drag",{action:"start",pointerType:i,start:t,screenPoint:t}),this.startManipulator.events.emit("drag",{action:"end",start:t,screenPoint:t}),(0,f.pC)(this.analysis.startPoint)&&(this.startManipulator.interactive=!1,this.endManipulator.interactive=!1,this.lineState="drawing",this.endManipulator.events.emit("drag",{action:"start",pointerType:i,start:t,screenPoint:t}),n=!0);break;case"drawing":this.endManipulator.events.emit("drag",{action:"update",start:t,screenPoint:t}),(0,f.pC)(this.analysis.endPoint)&&(this.endManipulator.events.emit("drag",{action:"end",start:t,screenPoint:t}),this.startManipulator.interactive=!0,this.endManipulator.interactive=!0,this.measurementView.finishMeasurement(),n=!0)}n&&e.stopPropagation(),"mouse"===e.pointerType&&this._hoverAt(t)}}},{key:"_hoverAt",value:function(e){var t=this._isAnyPointerDown&&"drawing"!==this.lineState&&"editing"!==this.lineState;if(this.measurementView.requiresCursorPoint&&!t){var i=this._pick(e);i.mapPoint&&(this.cursorPoint=i.mapPoint)}else this.cursorPoint=null}},{key:"_pick",value:function(e){var t=this._cachedPickRequest.screenPoint;return t&&t.x===e.x&&t.y===e.y||(this._cachedPickRequest.screenPoint=e,this._cachedPickResult=this.measurementView.pick(this._cachedPickRequest)),this._cachedPickResult}},{key:"_clearCachedPickRequest",value:function(){this._cachedPickRequest.screenPoint=null}},{key:"_surfaceLocation",value:function(e,t){return 0===t?"on-the-surface":e.z>=this.measurementView.getElevation(e)?"above-the-surface":"below-the-surface"}},{key:"_updateManipulatorVisibility",value:function(){this.startManipulator.available=(0,f.pC)(this.analysis.startPoint),this.endManipulator.available=(0,f.pC)(this.analysis.endPoint)}}]),i}(X.m);(0,l._)([(0,h.Cb)({readOnly:!0})],Q.prototype,"state",null),(0,l._)([(0,h.Cb)()],Q.prototype,"lineState",void 0),(0,l._)([(0,h.Cb)({readOnly:!0})],Q.prototype,"creating",null),(0,l._)([(0,h.Cb)({readOnly:!0})],Q.prototype,"cursor",null),(0,l._)([(0,h.Cb)()],Q.prototype,"cursorPoint",null),(0,l._)([(0,h.Cb)({constructOnly:!0})],Q.prototype,"analysis",void 0),(0,l._)([(0,h.Cb)()],Q.prototype,"measurementView",void 0),(0,l._)([(0,h.Cb)({constructOnly:!0})],Q.prototype,"view",void 0),(0,l._)([(0,h.Cb)({readOnly:!0})],Q.prototype,"validMeasurement",null),(0,l._)([(0,h.Cb)({value:null})],Q.prototype,"startPointSurfaceLocation",void 0),(0,l._)([(0,h.Cb)({value:null})],Q.prototype,"endPointSurfaceLocation",void 0);var $=Q=(0,l._)([(0,p.j)("esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DTool")],Q),ee=i(32845),te=M.Z.getLogger("esri.widgets.DirectLineMeasurement3D.DirectLineMeasurement3DViewModel"),ie=function(e){(0,r.Z)(i,e);var t=(0,o.Z)(i);function i(e){var n;return(0,a.Z)(this,i),(n=t.call(this,e)).logger=te,n.supportedViewType="3d",n.unsupportedErrorMessage="DirectLineMeasurement3DViewModel is only supported in 3D views.",n._userUnitOptions=null,n.ready=!1,n.analysis=new k,n._userUnit=null,n}return(0,s.Z)(i,[{key:"state",get:function(){return this.disabled?"disabled":(0,f.Wi)(this.tool)?"ready":this.tool.state}},{key:"measurement",get:function(){if((0,f.Wi)(this.tool))return null;var e={mode:"euclidean",directDistance:{text:null,state:"unavailable"},horizontalDistance:{text:null,state:"unavailable"},verticalDistance:{text:null,state:"unavailable"}},t=this.tool.measurementView.analysisView;if((0,f.Wi)(t))return e;var i=t.actualVisualizedMeasurement,n=this.tool.measurementView,a=(0,f.pC)(t.result)?"available":"unavailable";switch(i){case"euclidean":return{mode:"euclidean",directDistance:{text:n.directLabelText,state:a},horizontalDistance:{text:n.horizontalLabelText,state:a},verticalDistance:{text:n.verticalLabelText,state:a}};case"geodesic":return{mode:"geodesic",directDistance:{text:null,state:"unavailable"},horizontalDistance:{text:n.horizontalLabelText,state:a},verticalDistance:{text:n.verticalLabelText,state:a}};default:return e}}},{key:"unitOptions",get:function(){return this._filteredOrAllUnits(this._userUnitOptions)},set:function(e){this._userUnitOptions=e,this._set("unitOptions",this._filteredOrAllUnits(this._userUnitOptions))}},{key:"unit",get:function(){return this._userUnit?(this._userUnit=this._findSelectableUnit(this._userUnit,this.defaultUnit),this._userUnit):this._findSelectableUnit(this.defaultUnit)},set:function(e){this._userUnit=e?this._findSelectableUnit(e,this._userUnit):null,this.analysis.unit=e}},{key:"start",value:function(){return this.createTool()}},{key:"clear",value:function(){this.removeTool()}},{key:"createToolParams",value:function(){return{toolConstructor:$}}},{key:"_findSelectableUnit",value:function(e,t){var i=this.unitOptions;return-1!==i.indexOf(e)?e:t?this._findSelectableUnit(t):i[0]}},{key:"_filteredOrAllUnits",value:function(e){if(!e)return c.oD.slice();var t=e.filter((function(e){return-1!==c.oD.indexOf(e)}));return 0===t.length?c.oD.slice():t}},{key:"onConnectToAnalysisView",value:function(){(0,f.pC)(this.view)&&this.view.ready&&(this.ready=!0)}},{key:"onDisconnectFromAnalysisView",value:function(){this.ready=!1}}]),i}(ee.V);(0,l._)([(0,h.Cb)()],ie.prototype,"ready",void 0),(0,l._)([(0,h.Cb)({readOnly:!0})],ie.prototype,"state",null),(0,l._)([(0,h.Cb)({readOnly:!0})],ie.prototype,"measurement",null),(0,l._)([(0,h.Cb)(L.Y)],ie.prototype,"defaultUnit",void 0),(0,l._)([(0,h.Cb)()],ie.prototype,"unitOptions",null),(0,l._)([(0,h.Cb)()],ie.prototype,"unit",null),(0,l._)([(0,h.Cb)()],ie.prototype,"analysis",void 0),(0,l._)([(0,h.Cb)()],ie.prototype,"_userUnit",void 0);var ne=ie=(0,l._)([(0,p.j)("esri.widgets.DirectLineMeasurement3D.DirectLineMeasurement3DViewModel")],ie),ae=i(78088),se=i(80532),re=i(67005),oe=(i(80975),"esri-direct-line-measurement-3d"),le={buttonDisabled:"esri-button--disabled",base:"".concat(oe," esri-widget esri-widget--panel"),container:"".concat(oe,"__container"),hint:"".concat(oe,"__hint"),hintText:"".concat(oe,"__hint-text"),panelError:"".concat(oe,"__panel--error"),measurement:"".concat(oe,"__measurement"),measurementItem:"".concat(oe,"__measurement-item"),measurementItemDisabled:"".concat(oe,"__measurement-item--disabled"),measurementItemTitle:"".concat(oe,"__measurement-item-title"),measurementItemValue:"".concat(oe,"__measurement-item-value"),settings:"".concat(oe,"__settings"),units:"".concat(oe,"__units"),unitsLabel:"".concat(oe,"__units-label"),unitsSelect:"".concat(oe,"__units-select esri-select"),unitsSelectWrapper:"".concat(oe,"__units-select-wrapper"),actionSection:"".concat(oe,"__actions"),newMeasurementButton:"".concat(oe,"__clear-button esri-button esri-button--primary"),widgetIcon:"esri-icon-measure-line"},ue=function(e){(0,r.Z)(i,e);var t=(0,o.Z)(i);function i(e,n){var s;return(0,a.Z)(this,i),(s=t.call(this,e,n)).view=null,s.visible=null,s.iconClass=le.widgetIcon,s.label=void 0,s.messages=null,s.messagesUnits=null,s.viewModel=new ne,s.unitOptions=null,s.unit=null,s}return(0,s.Z)(i,[{key:"render",value:function(){var e=this,t=this.viewModel,i=t.supported,n=t.active,a=t.state,s=t.measurement,r=t.unit,o="disabled"===a,l="ready"===a,u="measuring"===a||"measured"===a,d=this.messages,h=this.messagesUnits,p=n&&l?(0,re.u)("section",{key:"esri-direct-line-measurement-3d__hint",class:le.hint},(0,re.u)("p",{class:le.hintText},d.hint)):null,v=i?null:(0,re.u)("section",{key:"esri-direct-line-measurement-3d__unsupported",class:le.panelError},(0,re.u)("p",null,d.unsupported)),y=function(t,i,n){switch(i.state){case"available":return(0,re.u)("div",{key:"".concat(n,"-enabled"),class:le.measurementItem},(0,re.u)("span",{class:le.measurementItemTitle},t),(0,re.u)("span",{class:le.measurementItemValue},i.text));case"unavailable":return(0,re.u)("div",{key:"".concat(n,"-disabled"),class:e.classes(le.measurementItem,le.measurementItemDisabled)},(0,re.u)("span",{class:le.measurementItemTitle},t))}},_=u?(0,re.u)("section",{key:"esri-direct-line-measurement-3d__measurement",class:le.measurement},y(d.direct,s.directDistance,"direct"),y(d.horizontal,s.horizontalDistance,"horizontal"),y(d.vertical,s.verticalDistance,"vertical")):null,m="".concat(this.id,"__units"),f=(0,re.u)("label",{class:le.unitsLabel,for:m},d.unit),b=(0,re.u)("div",{class:le.unitsSelectWrapper},(0,re.u)("select",{class:le.unitsSelect,id:m,onchange:this._changeUnit,bind:this,value:r},this.viewModel.unitOptions.map((function(e){var t;return(0,re.u)("option",{key:e,value:e},(0,c.ZO)(e)?h.systems[e]:null==(t=h.units[e])?void 0:t.pluralCapitalized)})))),w=(0,re.u)("section",{key:"esri-direct-line-measurement-3d__units",class:le.units},f,b),g=u?(0,re.u)("div",{key:"settings",class:le.settings},w):null,P=!i||n&&!u?null:(0,re.u)("div",{class:le.actionSection},(0,re.u)("button",{disabled:o,class:this.classes(le.newMeasurementButton,o&&le.buttonDisabled),bind:this,onclick:this._newMeasurement,type:"button"},d.newMeasurement)),C=this.visible?(0,re.u)("div",{class:le.container},v,p,g,_,P):null;return(0,re.u)("div",{key:this,class:le.base,role:"presentation"},C)}},{key:"_newMeasurement",value:function(){(0,u.R8)(this.viewModel.start())}},{key:"_changeUnit",value:function(e){var t=e.target,i=t.options[t.selectedIndex];i&&(this.unit=i.value)}}]),i}(v.Z);(0,l._)([(0,d.B)("viewModel.view")],ue.prototype,"view",void 0),(0,l._)([(0,d.B)("viewModel.visible")],ue.prototype,"visible",void 0),(0,l._)([(0,d.B)("viewModel.active")],ue.prototype,"active",void 0),(0,l._)([(0,h.Cb)()],ue.prototype,"iconClass",void 0),(0,l._)([(0,h.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ue.prototype,"label",void 0),(0,l._)([(0,h.Cb)(),(0,se.H)("esri/widgets/DirectLineMeasurement3D/t9n/DirectLineMeasurement3D")],ue.prototype,"messages",void 0),(0,l._)([(0,h.Cb)(),(0,se.H)("esri/core/t9n/Units")],ue.prototype,"messagesUnits",void 0),(0,l._)([(0,h.Cb)()],ue.prototype,"uiStrings",void 0),(0,l._)([(0,h.Cb)({type:ne})],ue.prototype,"viewModel",void 0),(0,l._)([(0,d.B)("viewModel.unitOptions")],ue.prototype,"unitOptions",void 0),(0,l._)([(0,d.B)("viewModel.unit")],ue.prototype,"unit",void 0),(0,l._)([(0,ae.h)()],ue.prototype,"_newMeasurement",null),(0,l._)([(0,ae.h)()],ue.prototype,"_changeUnit",null);var ce=ue=(0,l._)([(0,p.j)("esri.widgets.DirectLineMeasurement3D")],ue)}}]);
//# sourceMappingURL=3293.199aa4b4.chunk.js.map