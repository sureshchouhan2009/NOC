"use strict";(self.webpackChunketihadrailapp=self.webpackChunketihadrailapp||[]).push([[5957],{35888:function(e,t,n){n.d(t,{d:function(){return a}});var r=n(16889);function a(e,t,n){var a,u=e.byteLength/(4*t),c=new Uint32Array(e,0,u*t),f=new Uint32Array(u),p=null!=(a=null==n?void 0:n.minReduction)?a:0,h=(null==n?void 0:n.originalIndices)||null,v=h?h.length:0,g=(null==n?void 0:n.componentOffsets)||null,d=0;if(g)for(var m=0;m<g.length-1;m++){var y=g[m+1]-g[m];y>d&&(d=y)}else d=u;var x=Math.floor(1.1*d)+1;(null==l||l.length<2*x)&&(l=new Uint32Array((0,r.Sf)(2*x)));for(var w=0;w<2*x;w++)l[w]=0;for(var b=0,A=!!g&&!!h,C=A?v:u,Z=A?new Uint32Array(v):null,k=1.96,R=0!==p?Math.ceil(4*k*k/(p*p)*p*(1-p)):C,F=1,M=g?g[1]:C,O=0;O<C;O++){if(O===R){var P=1-b/O;if(P+k*Math.sqrt(P*(1-P)/O)<p)return null;R*=2}if(O===M){for(var L=0;L<2*x;L++)l[L]=0;if(h)for(var z=g[F-1];z<g[F];z++)Z[z]=f[h[z]];M=g[++F]}for(var U=A?h[O]:O,I=U*t,S=s(c,I,t),T=S%x,E=b;0!==l[2*T+1];){if(l[2*T]===S){var _=l[2*T+1]-1;if(i(c,I,_*t,t)){E=f[_];break}}++T>=x&&(T-=x)}E===b&&(l[2*T]=S,l[2*T+1]=U+1,b++),f[U]=E}if(0!==p&&1-b/u<p)return null;if(A){for(var j=g[F-1];j<Z.length;j++)Z[j]=f[h[j]];f=Z}var B=new Uint32Array(t*b);b=0;for(var W=0;W<C;W++)f[W]===b&&(o(c,(A?h[W]:W)*t,B,b*t,t),b++);if(h&&!A){for(var Y=new Uint32Array(v),K=0;K<Y.length;K++)Y[K]=f[h[K]];f=Y}return{buffer:B.buffer,indices:f,uniqueCount:b}}function i(e,t,n,r){for(var a=0;a<r;a++)if(e[t+a]!==e[n+a])return!1;return!0}function o(e,t,n,r,a){for(var i=0;i<a;i++)n[r+i]=e[t+i]}function s(e,t,n){for(var r=0,a=0;a<n;a++)r=(r=e[t+a]+r|0)+(r<<11)+(r>>>2)|0;return r>>>0}var l=null},91320:function(e,t,n){n.d(t,{M:function(){return l},b:function(){return s}});var r=n(37762),a=n(79347),i=n(69662),o=n(35888);function s(e){var t,n=l(e.rings,e.hasZ,1),i=[],s=0,u=0,c=(0,r.Z)(n.polygons);try{var f=function(){var e=t.value,r=e.count,o=e.index,l=new Float64Array(n.position.buffer,3*o*n.position.BYTES_PER_ELEMENT,3*r),c=e.holeIndices.map((function(e){return e-o})),f=new Uint32Array((0,a.e)(l,c,3));i.push({position:l,faces:f}),s+=l.length,u+=f.length};for(c.s();!(t=c.n()).done;)f()}catch(v){c.e(v)}finally{c.f()}var p=function(e,t,n){if(1===e.length)return e[0];var a,i=new Float64Array(t),o=new Uint32Array(n),s=0,l=0,u=0,c=(0,r.Z)(e);try{for(c.s();!(a=c.n()).done;){for(var f=a.value,p=0;p<f.position.length;p++)i[s++]=f.position[p];for(var h=0;h<f.faces.length;h++)o[l++]=f.faces[h]+u;u=s/3}}catch(v){c.e(v)}finally{c.f()}return{position:i,faces:o}}(i,s,u),h=(0,o.d)(p.position.buffer,6,{originalIndices:p.faces});return p.position=new Float64Array(h.buffer),p.faces=h.indices,p}function l(e,t,n){for(var r=e.length,a=new Array(r),i=new Array(r),o=new Array(r),s=0,l=0,f=0,p=0,h=0;h<r;++h)p+=e[h].length;for(var v=new Float64Array(3*p),g=0,d=r-1;d>=0;d--){var m=e[d],y=1===n&&c(m);if(y&&1!==r)a[s++]=m;else{for(var x=m.length,w=0;w<s;++w)x+=a[w].length;var b={index:g,pathLengths:new Array(s+1),count:x,holeIndices:new Array(s)};b.pathLengths[0]=m.length,m.length>0&&(o[f++]={index:g,count:m.length}),g=y?u(m,m.length-1,-1,v,g,m.length,t):u(m,0,1,v,g,m.length,t);for(var A=0;A<s;++A){var C=a[A];b.holeIndices[A]=g,b.pathLengths[A+1]=C.length,C.length>0&&(o[f++]={index:g,count:C.length}),g=u(C,0,1,v,g,C.length,t)}s=0,b.count>0&&(i[l++]=b)}}for(var Z=0;Z<s;++Z){var k=a[Z];k.length>0&&(o[f++]={index:g,count:k.length}),g=u(k,0,1,v,g,k.length,t)}return l<r&&(i.length=l),f<r&&(o.length=f),{position:v,polygons:i,outlines:o}}function u(e,t,n,r,a,i,o){a*=3;for(var s=0;s<i;++s){var l=e[t];r[a++]=l[0],r[a++]=l[1],r[a++]=o?l[2]:0,t+=n}return a/3}function c(e){return!(0,i.bu)(e,!1,!1)}},45957:function(e,t,n){n.r(t),n.d(t,{meshFeatureSetFromJSON:function(){return Be}});var r=n(37762),a=n(52639),i=n(92026),o=n(53866),s=n(1413),l=n(15861),u=n(15671),c=n(43144),f=n(60136),p=n(29388),h=n(87757),v=n(27366),g=n(10064),d=n(41691),m=n(54472),y=n(32718),x=n(67426),w=n(66978),b=n(94172),A=n(49861),C=(n(63780),n(93169),n(25243),n(69912)),Z=n(71353),k=n(32238),R=n(7882),F=n(80885),M=n(45238),O=n(64995),P=n(76046),L=n(27474),z=n(91320),U=n(60176),I=n(26548),S=n(57898),T=y.Z.getLogger("esri.geometry.support.meshUtils.centerAt");function E(e,t,n){var r;if(e.vertexAttributes&&e.vertexAttributes.position){var a=null!=(r=null==n?void 0:n.origin)?r:e.origin;(0,i.pC)(e.transform)?(null!=(null==n?void 0:n.geographic)&&n.geographic!==e.transform.geographic&&T.warn("Specifying the 'geographic' parameter (".concat(n.geographic,") different from the Mesh transform setting (").concat(e.transform.geographic,") is not supported")),function(e,t,n){var r=t.x-n.x,a=t.y-n.y,i=t.hasZ&&n.hasZ?t.z-n.z:0,o=e.origin;e.origin=[o[0]+r,o[1]+a,o[2]+i]}(e.transform,t,a)):(0,I.h)(e.spatialReference,n)?function(e,t,n){var r=(0,S.FF)(e.vertexAttributes,n,{geographic:!0}),a=(0,S.iv)(r,t,{geographic:!0}),i=a.position,o=a.normal,s=a.tangent;e.vertexAttributes.position=i,e.vertexAttributes.normal=o,e.vertexAttributes.tangent=s,e.vertexAttributesChanged()}(e,t,a):function(e,t,n){var r=j,a=_;if((0,U.KC)(t,a,e.spatialReference)){if(!(0,U.KC)(n,r,e.spatialReference)){var i=e.origin;r[0]=i.x,r[1]=i.y,r[2]=i.z,T.error("Failed to project specified origin (wkid:".concat(n.spatialReference.wkid,") to mesh spatial reference (wkid:").concat(e.spatialReference.wkid,")."))}(function(e,t,n){if(e)for(var r=0;r<e.length;r+=3)for(var a=0;a<3;a++)e[r+a]+=t[a]-n[a]})(e.vertexAttributes.position,a,r),e.vertexAttributesChanged()}else T.error("Failed to project centerAt location (wkid:".concat(t.spatialReference.wkid,") to mesh spatial reference (wkid:").concat(e.spatialReference.wkid,")"))}(e,t,a)}}var _=(0,Z.c)(),j=(0,Z.c)(),B=n(35995);function W(){return W=(0,l.Z)(h.mark((function e(t,r,a){var o,s,l,u,c,f,p;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.Hl)(Promise.all([n.e(6113),n.e(6975)]).then(n.bind(n,35886)),a);case 2:return o=e.sent,s=o.loadGLTFMesh,e.next=6,K(r,a);case 6:return l=e.sent,(u=s(new R.Z({x:0,y:0,z:0,spatialReference:t.spatialReference}),l.url,{resolveFile:Y(l),useTransform:!0,signal:(0,i.pC)(a)?a.signal:null})).then((function(){return l.dispose()}),(function(){return l.dispose()})),e.next=11,u;case 11:c=e.sent,f=c.vertexAttributes,p=c.components,t.vertexAttributes=f,t.components=p;case 15:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function Y(e){var t=(0,B.Yd)(e.url);return function(n){var r,a=(0,B.PF)(n,t,t),i=a?a.replace(/^ *\.\//,""):null;return null!=(r=e.files.get(i))?r:n}}function K(e,t){return N.apply(this,arguments)}function N(){return(N=(0,l.Z)(h.mark((function e(t,n){return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t instanceof Blob?H.fromBlob(t):"string"==typeof t?new H(t):Array.isArray(t)?X(t,n):D(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t){return q.apply(this,arguments)}function q(){return q=(0,l.Z)(h.mark((function e(t,n){var a,o,s,u,c,f,p,v,d,m,y,x;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Map,o=null,e.next=4,(0,w.WW)(t.map(function(){var e=(0,l.Z)(h.mark((function e(t){return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.name,e.next=3,K(t instanceof Blob?t:t.source,n);case 3:return e.t1=e.sent,e.abrupt("return",{name:e.t0,source:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:s=e.sent,u=[],c=(0,r.Z)(s);try{for(c.s();!(f=c.n()).done;)(p=f.value)&&((0,w.Hc)(n)?p.source.dispose():u.push(p))}catch(b){c.e(b)}finally{c.f()}for((0,w.k_)(n),v=0,d=u;v<d.length;v++)m=d[v],y=m.name,x=m.source,((0,i.Wi)(o)||/\.(gltf|glb)/i.test(y))&&(o=x.url),a.set(y,x.url),x.files&&x.files.forEach((function(e,t){return a.set(t,e)}));if(!(0,i.Wi)(o)){e.next=12;break}throw new g.Z("mesh-load-external:missing-files","Missing files to load external mesh source");case 12:return e.abrupt("return",new H(o,(function(){return u.forEach((function(e){return e.source.dispose()}))}),a));case 13:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}function D(e,t){return G.apply(this,arguments)}function G(){return G=(0,l.Z)(h.mark((function e(t,r){var a,i,o;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.Hl)(Promise.resolve().then(n.bind(n,76200)),r);case 2:if(a=e.sent,i=a.default,"string"!=typeof t.multipart[0]){e.next=10;break}return e.next=7,Promise.all(t.multipart.map(function(){var e=(0,l.Z)(h.mark((function e(t){return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t,{responseType:"array-buffer"});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=t.multipart;case 11:return o=e.t0,e.abrupt("return",H.fromBlob(new Blob(o)));case 13:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}var H=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;(0,u.Z)(this,e),this.url=t,this.dispose=n,this.files=r}return(0,c.Z)(e,null,[{key:"fromBlob",value:function(t){var n=URL.createObjectURL(t);return new e(n,(function(){return URL.revokeObjectURL(n)}))}}]),e}(),J=n(22753),Q=n(11873),V=n(81949),$=n(11186),ee=n(92183),te=n(11700),ne=y.Z.getLogger("esri.geometry.support.meshUtils.offset");function re(e,t,n){e.vertexAttributes&&e.vertexAttributes.position&&((0,i.pC)(e.transform)?(null!=(null==n?void 0:n.geographic)&&n.geographic!==e.transform.geographic&&ne.warn("Specifying the 'geographic' parameter (".concat(n.geographic,") different from the Mesh transform setting (").concat(e.transform.geographic,") is not supported")),function(e,t){var n=e.origin;e.origin=(0,$.b)((0,Z.c)(),n,t)}(e.transform,t)):(0,I.h)(e.spatialReference,n)?function(e,t){var n=e.spatialReference,r=e.vertexAttributes.position,a=e.vertexAttributes.normal,o=e.vertexAttributes.tangent,s=new Float64Array(r.length),l=(0,i.pC)(a)?new Float32Array(a.length):null,u=(0,i.pC)(o)?new Float32Array(o.length):null,c=e.extent.center,f=ie;(0,U.Bm)(n,[c.x,c.y,c.z],oe,(0,ee.rS)(n)),(0,J.f)(se,oe),(0,$.t)(f,t,se),(0,te.XO)(r,n,s),(0,i.pC)(a)&&(0,te.Iz)(a,r,s,n,l),(0,i.pC)(o)&&(0,te.wi)(o,r,s,n,u),ae(s,f),(0,te.To)(s,r,n),(0,i.pC)(a)&&(0,te.Yk)(l,r,s,n,a),(0,i.pC)(o)&&(0,te.M2)(u,r,s,n,o),e.vertexAttributesChanged()}(e,t):function(e,t){ae(e.vertexAttributes.position,t),e.vertexAttributesChanged()}(e,t))}function ae(e,t){if(e)for(var n=0;n<e.length;n+=3)for(var r=0;r<3;r++)e[n+r]+=t[r]}var ie=(0,Z.c)(),oe=(0,V.c)(),se=(0,Q.c)();var le={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};function ue(e,t,n){(function(e){for(var t=0;t<e.position.length;t+=3)e.position[t+2]+=.5})(e),function(e,t){if(null==t)return;var n="number"==typeof t?[t,t,t]:[null!=t.width?t.width:1,null!=t.depth?t.depth:1,null!=t.height?t.height:1];he[0]=n[0],he[4]=n[1],he[8]=n[2];for(var r=0;r<e.position.length;r+=3){for(var a=0;a<3;a++)pe[a]=e.position[r+a];(0,$.t)(pe,pe,he);for(var i=0;i<3;i++)e.position[r+i]=pe[i]}if(n[0]!==n[1]||n[1]!==n[2]){he[0]=1/n[0],he[4]=1/n[1],he[8]=1/n[2];for(var o=0;o<e.normal.length;o+=3){for(var s=0;s<3;s++)pe[s]=e.normal[o+s];(0,$.t)(pe,pe,he),(0,$.n)(pe,pe);for(var l=0;l<3;l++)e.normal[o+l]=pe[l]}}}(e,n&&n.size);var r=(0,S.w1)(e,t,n),a=r.vertexAttributes,i=r.transform;return{vertexAttributes:new L.ZP((0,s.Z)((0,s.Z)({},a),{},{uv:e.uv})),transform:i,components:[new O.Z({faces:e.faces,material:n&&n.material||null})],spatialReference:t.spatialReference}}var ce={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},fe={south:0,east:1,north:2,west:3,up:4,down:5},pe=(0,Z.c)(),he=(0,Q.c)(),ve=n(14226),ge=y.Z.getLogger("esri.geometry.support.meshUtils.rotate");function de(e,t,n){if(e.vertexAttributes&&e.vertexAttributes.position&&0!==t[3]){var r=e.spatialReference;if((0,i.pC)(e.transform)){var a;null!=(null==n?void 0:n.geographic)&&n.geographic!==e.transform.geographic&&ge.warn("Specifying the 'geographic' parameter (".concat(n.geographic,") different from the Mesh transform setting (").concat(e.transform.geographic,") is not supported"));var o=null!=(a=null==n?void 0:n.origin)?a:e.transform.getOriginPoint(r);!function(e,t,n){var r=(0,$.s)(ye,n.x,n.y,n.z),a=(0,$.f)(ye,r,e.origin);e.applyLocalInverse(a,xe),e.rotation=(0,M.qC)(e.rotation,t,(0,M.Ue)()),e.applyLocalInverse(a,a),(0,$.f)(a,a,xe),e.translation=(0,$.b)((0,Z.c)(),e.translation,a)}(e.transform,t,o)}else{var s,l=null!=(s=null==n?void 0:n.origin)?s:e.origin;(0,I.h)(e.spatialReference,n)?function(e,t,n){var r=e.spatialReference,a=(0,ee.rS)(r),o=Ce;(0,U.KC)(n,o,a)||(0,U.KC)(e.origin,o,a);var s=e.vertexAttributes.position,l=e.vertexAttributes.normal,u=e.vertexAttributes.tangent,c=new Float64Array(s.length),f=(0,i.pC)(l)?new Float32Array(l.length):null,p=(0,i.pC)(u)?new Float32Array(u.length):null;(0,U.Bm)(a,o,be,a),(0,J.f)(Ae,be);var h=we;(0,$.t)((0,M.ZZ)(we),(0,M.ZZ)(t),Ae),h[3]=t[3],(0,te.XO)(s,r,c),(0,i.pC)(l)&&(0,te.Iz)(l,s,c,r,f),(0,i.pC)(u)&&(0,te.wi)(u,s,c,r,p),me(c,h,3,o),(0,te.To)(c,s,r),(0,i.pC)(l)&&(me(f,h,3),(0,te.Yk)(f,s,c,r,l)),(0,i.pC)(u)&&(me(p,h,4),(0,te.M2)(p,s,c,r,u)),e.vertexAttributesChanged()}(e,t,l):function(e,t,n){var r=Ce;if(!(0,U.KC)(n,r,e.spatialReference)){var a=e.origin;r[0]=a.x,r[1]=a.y,r[2]=a.z,ge.error("Failed to project specified origin (wkid:".concat(n.spatialReference.wkid,") to mesh spatial reference (wkid:").concat(e.spatialReference.wkid,")."))}me(e.vertexAttributes.position,t,3,r),me(e.vertexAttributes.normal,t,3),me(e.vertexAttributes.tangent,t,4),e.vertexAttributesChanged()}(e,t,l)}}}function me(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Z.Z;if(!(0,i.Wi)(e)){(0,ve.i)(be),(0,ve.e)(be,be,(0,M.WH)(t),(0,M.ZZ)(t));for(var a=0;a<e.length;a+=n){for(var o=0;o<3;o++)ye[o]=e[a+o]-r[o];(0,$.m)(ye,ye,be);for(var s=0;s<3;s++)e[a+s]=ye[s]+r[s]}}}var ye=(0,Z.c)(),xe=(0,Z.c)(),we=(0,M.Ue)(),be=(0,V.c)(),Ae=(0,Q.c)(),Ce=(0,Z.c)(),Ze=y.Z.getLogger("esri.geometry.support.meshUtils.scale");function ke(e,t,n){if(e.vertexAttributes&&e.vertexAttributes.position){var r=e.spatialReference;if((0,i.pC)(e.transform)){var a;null!=(null==n?void 0:n.geographic)&&n.geographic!==e.transform.geographic&&Ze.warn("Specifying the 'geographic' parameter (".concat(n.geographic,") different from the Mesh transform setting (").concat(e.transform.geographic,") is not supported"));var o=null!=(a=null==n?void 0:n.origin)?a:e.transform.getOriginPoint(r);!function(e,t,n){var r=(0,$.s)(Me,n.x,n.y,n.z),a=(0,$.f)(Me,r,e.origin);e.applyLocalInverse(a,Oe);var i=(0,$.a)((0,Z.c)(),e.scale,t);e.scale=i,e.applyLocalInverse(a,a),(0,$.f)(a,a,Oe),e.translation=(0,$.b)((0,Z.c)(),e.translation,a)}(e.transform,t,o)}else{var s=(0,I.h)(e.spatialReference,n),l=n&&n.origin||e.origin;s?function(e,t,n){var r=e.spatialReference,a=(0,ee.rS)(r),o=Pe;(0,U.KC)(n,o,a)||(0,U.KC)(e.origin,o,a);var s=e.vertexAttributes.position,l=e.vertexAttributes.normal,u=e.vertexAttributes.tangent,c=new Float64Array(s.length),f=(0,i.pC)(l)?new Float32Array(l.length):null,p=(0,i.pC)(u)?new Float32Array(u.length):null;(0,te.XO)(s,r,c),(0,i.pC)(l)&&(0,te.Iz)(l,s,c,r,f),(0,i.pC)(u)&&(0,te.wi)(u,s,c,r,p),Re(c,t,o),(0,te.To)(c,s,r),(0,i.pC)(l)&&(0,te.Yk)(f,s,c,r,l),(0,i.pC)(u)&&(0,te.M2)(p,s,c,r,u),e.vertexAttributesChanged()}(e,t,l):function(e,t,n){var r=Pe;if(!(0,U.KC)(n,r,e.spatialReference)){var a=e.origin;r[0]=a.x,r[1]=a.y,r[2]=a.z,Ze.error("Failed to project specified origin (wkid:".concat(n.spatialReference.wkid,") to mesh spatial reference (wkid:").concat(e.spatialReference.wkid,")."))}Re(e.vertexAttributes.position,t,r),e.vertexAttributesChanged()}(e,t,l)}}}function Re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z.Z;if(e)for(var r=0;r<e.length;r+=3){for(var a=0;a<3;a++)Me[a]=e[r+a]-n[a];(0,$.a)(Me,Me,t);for(var i=0;i<3;i++)e[r+i]=Me[i]+n[i]}}var Fe,Me=(0,Z.c)(),Oe=(0,Z.c)(),Pe=(0,Z.c)(),Le=y.Z.getLogger("esri.geometry.Mesh"),ze=Fe=function(e){(0,f.Z)(a,e);var t=(0,p.Z)(a);function a(e){var n;return(0,u.Z)(this,a),(n=t.call(this,e)).components=null,n.transform=null,n.external=null,n.hasZ=!0,n.hasM=!1,n.vertexAttributes=new L.QL,n.type="mesh",n}return(0,c.Z)(a,[{key:"initialize",value:function(){var e=this;((0,i.Wi)(this.external)||this.vertexAttributes.position.length)&&(this.loadStatus="loaded"),this.when((function(){e.handles.add((0,b.Ym)((function(){var t;return{vertexAttributes:e.vertexAttributes,components:null==(t=e.components)?void 0:t.map((function(e){return e.clone()})),transform:(0,i.pC)(e.transform)?e.transform.clone():null}}),(function(){return e._set("external",null)}),{once:!0,sync:!0}))}))}},{key:"hasExtent",get:function(){return!this.loaded&&(0,i.pC)(this.external)&&(0,i.pC)(this.external.extent)||this.loaded&&this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0)}},{key:"boundingInfo",get:function(){var e=this.vertexAttributes.position,t=this.spatialReference;if(0===e.length||this.components&&0===this.components.length)return{extent:new o.Z({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:t}),center:new R.Z({x:0,y:0,z:0,spatialReference:t})};for(var n=(0,i.pC)(this.transform)?this.transform.project(e,t):e,r=1/0,a=1/0,s=1/0,l=-1/0,u=-1/0,c=-1/0,f=0,p=0,h=0,v=n.length,g=1/(v/3),d=0;d<v;){var m=n[d++],y=n[d++],x=n[d++];r=Math.min(r,m),a=Math.min(a,y),s=Math.min(s,x),l=Math.max(l,m),u=Math.max(u,y),c=Math.max(c,x),f+=g*m,p+=g*y,h+=g*x}return{extent:new o.Z({xmin:r,ymin:a,zmin:s,xmax:l,ymax:u,zmax:c,spatialReference:t}),center:new R.Z({x:f,y:p,z:h,spatialReference:t})}}},{key:"anchor",get:function(){if((0,i.pC)(this.transform))return this.transform.getOriginPoint(this.spatialReference);var e=this.boundingInfo;return new R.Z({x:e.center.x,y:e.center.y,z:e.extent.zmin,spatialReference:this.spatialReference})}},{key:"origin",get:function(){return(0,i.pC)(this.transform)?this.transform.getOriginPoint(this.spatialReference):this.boundingInfo.center}},{key:"extent",get:function(){return!this.loaded&&(0,i.pC)(this.external)&&(0,i.pC)(this.external.extent)?this.external.extent.clone():this.boundingInfo.extent}},{key:"addComponent",value:function(e){this.loaded?(this.components||(this.components=[]),this.components.push(O.Z.from(e)),this.notifyChange("components")):Le.error("addComponent()","Mesh must be loaded before applying operations")}},{key:"removeComponent",value:function(e){if(this.loaded){if(this.components){var t=this.components.indexOf(e);if(-1!==t)return this.components.splice(t,1),void this.notifyChange("components")}Le.error("removeComponent()","Provided component is not part of the list of components")}else Le.error("removeComponent()","Mesh must be loaded before applying operations")}},{key:"rotate",value:function(e,t,n,r){return(0,M.uT)(Ue.x,e,Ie),(0,M.uT)(Ue.y,t,Se),(0,M.uT)(Ue.z,n,Te),(0,M.qC)(Ie,Se,Ie),(0,M.qC)(Ie,Te,Ie),de(this,Ie,r),this}},{key:"offset",value:function(e,t,n,r){return this.loaded?(Ee[0]=e,Ee[1]=t,Ee[2]=n,re(this,Ee,r),this):(Le.error("offset()","Mesh must be loaded before applying operations"),this)}},{key:"scale",value:function(e,t){return this.loaded?(ke(this,e,t),this):(Le.error("scale()","Mesh must be loaded before applying operations"),this)}},{key:"centerAt",value:function(e,t){return this.loaded?(E(this,e,t),this):(Le.error("centerAt()","Mesh must be loaded before applying operations"),this)}},{key:"load",value:function(e){return(0,i.pC)(this.external)&&this.addResolvingPromise(function(e,t,n){return W.apply(this,arguments)}(this,this.external.source,e)),Promise.resolve(this)}},{key:"clone",value:function(){var e=this.components?new Map:null,t=this.components?new Map:null,n={components:this.components?this.components.map((function(n){return n.cloneWithDeduplication(e,t)})):null,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes.clone(),transform:(0,i.pC)(this.transform)?this.transform.clone():null,external:(0,i.pC)(this.external)?{source:this.external.source,extent:(0,i.pC)(this.external.extent)?this.external.extent.clone():null}:null};return new Fe(n)}},{key:"vertexAttributesChanged",value:function(){this.notifyChange("vertexAttributes")}},{key:"toBinaryGLTF",value:function(){var e=(0,l.Z)(h.mark((function e(t){var r,a;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1553).then(n.bind(n,11553));case 2:return r=e.sent,a=r.toBinaryGLTF,e.abrupt("return",a(this,t));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"createBox",value:function(e,t){if(!(e instanceof R.Z))return Le.error(".createBox()","expected location to be a Point instance"),null;var n=new Fe(ue(function(){for(var e=ce.faceDescriptions,t=ce.faceVertexOffsets,n=ce.uvScales,a=4*e.length,i=new Float64Array(3*a),o=new Float32Array(3*a),s=new Float32Array(2*a),l=new Uint32Array(2*e.length*3),u=0,c=0,f=0,p=0,h=0;h<e.length;h++){var v,g=e[h],d=u/3,m=(0,r.Z)(t);try{for(m.s();!(v=m.n()).done;){var y=v.value;l[p++]=d+y}}catch(Z){m.e(Z)}finally{m.f()}for(var x=g.corners,w=0;w<4;w++){var b=x[w],A=0;s[f++]=.25*n[w][0]+g.uvOrigin[0],s[f++]=g.uvOrigin[1]-.25*n[w][1];for(var C=0;C<3;C++)0!==g.axis[C]?(i[u++]=.5*g.axis[C],o[c++]=g.axis[C]):(i[u++]=.5*b[A++],o[c++]=0)}}return{position:i,normal:o,uv:s,faces:l}}(),e,t));return t&&t.imageFace&&"all"!==t.imageFace?function(e,t){for(var n=e.components[0],r=n.faces,a=fe[t],o=6*a,s=new Uint32Array(6),l=new Uint32Array(r.length-6),u=0,c=0,f=0;f<r.length;f++)f>=o&&f<o+6?s[u++]=r[f]:l[c++]=r[f];if((0,i.pC)(e.vertexAttributes.uv)){for(var p=new Float32Array(e.vertexAttributes.uv),h=4*a*2,v=[0,1,1,1,1,0,0,0],g=0;g<v.length;g++)p[h+g]=v[g];e.vertexAttributes.uv=p}return e.components=[new O.Z({faces:s,material:n.material}),new O.Z({faces:l})],e}(n,t.imageFace):n}},{key:"createSphere",value:function(e,t){return e instanceof R.Z?new Fe(ue(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Math.round(8*Math.pow(2,e)),n=2*t,r=(t-1)*(n+1)+2*n,a=new Float64Array(3*r),i=new Float32Array(3*r),o=new Float32Array(2*r),s=new Uint32Array((t-1)*n*2*3),l=0,u=0,c=0,f=0,p=0;p<=t;p++){var h=p/t*Math.PI+.5*Math.PI,v=Math.cos(h),g=Math.sin(h);pe[2]=g;for(var d=0===p||p===t,m=d?n-1:n,y=0;y<=m;y++){var x=y/m*2*Math.PI;pe[0]=-Math.sin(x)*v,pe[1]=Math.cos(x)*v;for(var w=0;w<3;w++)a[l]=.5*pe[w],i[l]=pe[w],++l;o[u++]=(y+(d?.5:0))/n,o[u++]=p/t,0!==p&&y!==n&&(p!==t&&(s[c++]=f,s[c++]=f+1,s[c++]=f-n),1!==p&&(s[c++]=f,s[c++]=f-n,s[c++]=f-n-1)),f++}}return{position:a,normal:i,uv:o,faces:s}}(t&&t.densificationFactor||0),e,t)):(Le.error(".createSphere()","expected location to be a Point instance"),null)}},{key:"createCylinder",value:function(e,t){return e instanceof R.Z?new Fe(ue(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=5,n=Math.round(16*Math.pow(2,e)),r=(t-1)*(n+1)+2*n,a=new Float64Array(3*r),i=new Float32Array(3*r),o=new Float32Array(2*r),s=new Uint32Array(4*n*3),l=0,u=0,c=0,f=0,p=0,h=0;h<=t;h++)for(var v=0===h||h===t,g=h<=1||h>=t-1,d=2===h||4===h,m=v?n-1:n,y=0;y<=m;y++){var x=y/m*2*Math.PI,w=v?0:.5;pe[0]=w*Math.sin(x),pe[1]=w*-Math.cos(x),pe[2]=h<=2?.5:-.5;for(var b=0;b<3;b++)a[l++]=pe[b],i[u++]=g?2===b?h<=1?1:-1:0:2===b?0:pe[b]/w;o[c++]=(y+(v?.5:0))/n,o[c++]=h<=1?1*h/3:h<=3?1*(h-2)/3+1/3:1*(h-4)/3+2/3,d||0===h||y===n||(h!==t&&(s[f++]=p,s[f++]=p+1,s[f++]=p-n),1!==h&&(s[f++]=p,s[f++]=p-n,s[f++]=p-n-1)),p++}return{position:a,normal:i,uv:o,faces:s}}(t&&t.densificationFactor||0),e,t)):(Le.error(".createCylinder()","expected location to be a Point instance"),null)}},{key:"createPlane",value:function(e,t){var n;if(!(e instanceof R.Z))return Le.error(".createPlane()","expected location to be a Point instance"),null;var r=null!=(n=null==t?void 0:t.facing)?n:"up",a=function(e,t){var n="number"==typeof t?t:null!=t?t.width:1,r="number"==typeof t?t:null!=t?t.height:1;switch(e){case"up":case"down":return{width:n,depth:r};case"north":case"south":return{width:n,height:r};case"east":case"west":return{depth:n,height:r}}}(r,null==t?void 0:t.size);return new Fe(ue(function(e){for(var t=le.facingAxisOrderSwap[e],n=le.position,r=le.normal,a=new Float64Array(n.length),i=new Float32Array(r.length),o=0,s=0;s<4;s++)for(var l=o,u=0;u<3;u++){var c=t[u],f=Math.abs(c)-1,p=c>=0?1:-1;a[o]=n[l+f]*p,i[o]=r[l+f]*p,o++}return{position:a,normal:i,uv:new Float32Array(le.uv),faces:new Uint32Array(le.faces)}}(r),e,(0,s.Z)((0,s.Z)({},t),{},{size:a})))}},{key:"createFromPolygon",value:function(e,t){if(!(e instanceof F.Z))return Le.error(".createFromPolygon()","expected polygon to be a Polygon instance"),null;var n=(0,z.b)(e);return new Fe({vertexAttributes:new L.QL({position:n.position}),components:[new O.Z({faces:n.faces,shading:"flat",material:t&&t.material||null})],spatialReference:e.spatialReference})}},{key:"createFromGLTF",value:function(){var e=(0,l.Z)(h.mark((function e(t,r,a){var i,o;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof R.Z){e.next=2;break}throw Le.error(".createfromGLTF()","expected location to be a Point instance"),new g.Z("invalid-input","Expected location to be a Point instance");case 2:return e.next=4,(0,w.Hl)(Promise.all([n.e(6113),n.e(6975)]).then(n.bind(n,35886)),a);case 4:return i=e.sent,o=i.loadGLTFMesh,e.t0=Fe,e.next=9,o(t,r,a);case 9:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createWithExternalSource",value:function(e,t,n){var r,a,i,o=null!=(r=null==n?void 0:n.extent)?r:null,s=null!=(a=null==n?void 0:n.transform.clone())?a:new P.Z;s.origin=[e.x,e.y,null!=(i=e.z)?i:0];var l=e.spatialReference;return new Fe({external:{source:t,extent:o},transform:s,spatialReference:l})}},{key:"createIncomplete",value:function(e,t){var n,r,a=null!=(n=null==t?void 0:t.transform.clone())?n:new P.Z;a.origin=[e.x,e.y,null!=(r=e.z)?r:0];var i=e.spatialReference,o=new Fe({transform:a,spatialReference:i});return o.addResolvingPromise(Promise.reject(new g.Z("mesh-incomplete","Mesh resources are not complete"))),o}}]),a}((0,d.p)(m.Z.LoadableMixin((0,x.v)(k.Z))));(0,v._)([(0,A.Cb)({type:[O.Z],json:{write:!0}})],ze.prototype,"components",void 0),(0,v._)([(0,A.Cb)({type:P.Z,json:{write:!0}})],ze.prototype,"transform",void 0),(0,v._)([(0,A.Cb)({constructOnly:!0})],ze.prototype,"external",void 0),(0,v._)([(0,A.Cb)({readOnly:!0})],ze.prototype,"hasExtent",null),(0,v._)([(0,A.Cb)({readOnly:!0})],ze.prototype,"boundingInfo",null),(0,v._)([(0,A.Cb)({readOnly:!0})],ze.prototype,"anchor",null),(0,v._)([(0,A.Cb)({readOnly:!0})],ze.prototype,"origin",null),(0,v._)([(0,A.Cb)({readOnly:!0,json:{read:!1}})],ze.prototype,"extent",null),(0,v._)([(0,A.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!0}})],ze.prototype,"hasZ",void 0),(0,v._)([(0,A.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!1}})],ze.prototype,"hasM",void 0),(0,v._)([(0,A.Cb)({type:L.QL,nonNullable:!0,json:{write:!0}})],ze.prototype,"vertexAttributes",void 0),ze=Fe=(0,v._)([(0,C.j)("esri.geometry.Mesh")],ze);var Ue={x:(0,Z.f)(1,0,0),y:(0,Z.f)(0,1,0),z:(0,Z.f)(0,0,1)},Ie=(0,M.Ue)(),Se=(0,M.Ue)(),Te=(0,M.Ue)(),Ee=(0,Z.c)(),_e=ze,je=n(49818);function Be(e,t,n){var o=n.features;n.features=[],delete n.geometryType;var s=je.default.fromJSON(n);s.geometryType="mesh";var l,u,c=s.spatialReference,f=(0,i.Wi)(e.outFields)||!e.outFields.length?function(){return{}}:(l=e.outFields.includes("*")?null:new Set(e.outFields),function(e){var t=e.attributes;if(!t)return{};if(!l)return t;for(var n in t)l.has(n)||delete t[n];return t}),p=(0,r.Z)(o);try{for(p.s();!(u=p.n()).done;){var h=u.value,v=We(h,c,t);(0,i.pC)(v)&&s.features.push(new a.Z({geometry:v,attributes:f(h)}))}}catch(g){p.e(g)}finally{p.f()}return s}function We(e,t,n){var a=function(e){if(!e.assetMappings)return{status:0};var t,n=[],a=new Map,i=(0,r.Z)(e.assetMappings);try{for(i.s();!(t=i.n()).done;){var o=t.value,s=o.seqNo,l=o.assetName,u=o.assetURL,c=o.conversionStatus;if("FAILED"===c)return{status:0};if("COMPLETED"!==c)return{status:1};if(null==s)n.push({name:l,source:u});else{var f=a.get(l),p=void 0;f?p=f.multipart:(p=[],n.push({name:l,source:{multipart:p}}),a.set(l,{multipart:p})),p[s]=u}}}catch(h){i.e(h)}finally{i.f()}return{status:2,source:n}}(e),i=a.status,s=a.source;if(0===i)return null;var l=function(e,t,n){var r=e.attributes,a=n.transformFieldRoles;return new R.Z({x:r[a.originX],y:r[a.originY],z:r[a.originZ],spatialReference:t})}(e,t,n),u=o.Z.fromJSON(e.geometry);u.spatialReference=t;var c=function(e,t){var n,r=e.attributes,a=e.assetMappings,i=t.transformFieldRoles;return new P.Z({translation:[r[i.translationX],r[i.translationY],r[i.translationZ]],rotation:(0,M.uT)([r[i.rotationX],r[i.rotationY],r[i.rotationZ]],r[i.rotationDeg]),scale:[r[i.scaleX],r[i.scaleY],r[i.scaleZ]],geographic:!(null!=(n=a.flags)&&n.includes("PROJECT_VERTICES"))})}(e,n);return 1===i?_e.createIncomplete(l,{extent:u,transform:c}):_e.createWithExternalSource(l,s,{extent:u,transform:c})}}}]);
//# sourceMappingURL=5957.c3d0b4fd.chunk.js.map